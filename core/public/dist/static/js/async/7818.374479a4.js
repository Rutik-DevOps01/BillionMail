"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["7818"],{77984:function(e,t,a){a.d(t,{F:()=>n});var l=a(68271),i=a(94821),s=a(76882);let n=()=>{let{t:e}=s.ZP.global,{copy:t,isSupported:a,copied:n}=(0,i.VPI)({legacy:!0});return{copied:n,copyText:async function(i){let s=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!i)return void l.v0.error(e("common.useCopy.noText"));a.value?(await t(i),s&&l.v0.success(e("common.useCopy.success"))):l.v0.error(e("common.useCopy.failed"))}}}},80947:function(e,t,a){a.d(t,{N:()=>n});var l=a(22895),i=a(68271),s=a(58786);let n=e=>{let{params:t,fetchFn:a,useParams:n,loading:r=!0,immediate:u=!0,rowKey:o=e=>e.id}=e,p=(0,s.iH)(r),d=(0,s.iH)([]),c=(0,s.iH)(0),m=(0,s.iH)(t),v=(0,s.iH)([]),_=()=>n?n(m.value):m.value,f=(0,l.DI)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(m.value.page=1),p.value=!0;try{let e=_(),t=await a(e);(0,i.Kn)(t)&&(d.value=(0,i.kJ)(t.list)?t.list:[],c.value=(0,i.hj)(t.total)?t.total:0)}finally{v.value=[],p.value=!1}},300),w=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f(e)},g=e=>{m.value.page=e},h=e=>{m.value.page_size=e};return(0,s.bv)(()=>{u&&w()}),{tableData:d,tableTotal:c,tableKeys:v,tableParams:m,fetchTable:w,resetTable:()=>w(!0),tableProps:(0,s.Fl)(()=>({rowKey:o,data:d.value,loading:p.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),batchProps:(0,s.Fl)(()=>({rowKey:o,data:d.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),pageProps:(0,s.Fl)(()=>({page:m.value.page,pageSize:m.value.page_size,itemCount:c.value,onUpdatePage:g,onUpdatePageSize:h}))}}},16893:function(e,t,a){a.d(t,{Z:()=>n});var l=a(15496),i=a(58786);let s={class:"mr-4px"},n=(0,i.aZ)({__name:"index",props:{href:{type:String,default:""},text:{type:String,default:""}},setup(e){let t=()=>{window.open(e.href)};return(a,n)=>{let r=l.ZP;return(0,i.wg)(),(0,i.j4)(r,{text:"",onClick:t},{default:(0,i.w5)(()=>[(0,i._)("span",s,(0,i.zw)(e.text||a.$t("common.actions.help")),1),n[0]||(n[0]=(0,i._)("i",{class:"i-custom:help text-primary"},null,-1))]),_:1,__:[0]})}}})},76631:function(e,t,a){a.d(t,{Z:()=>u});var l=a(90340),i=a(56357),s=a(58786),n=a(17351);let r={class:"ml-8px text-13px text-primary"},u=(0,s.aZ)({__name:"index",props:(0,s.Vf)({title:{type:String,default:""}},{show:{type:Boolean,default:!1},showModifiers:{}}),emits:["update:show"],setup(e){let t=(0,s.tT)(e,"show"),a=()=>{t.value=!t.value},u=!!(0,s.Rr)().title;return(o,p)=>{let d=i.g,c=l.Z;return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",{class:"flex items-center mb-20px cursor-pointer",onClick:a},[(0,s.Wm)(d,{size:"16",style:(0,s.j5)({transform:`rotate(${t.value?"90":"0"}deg)`,transition:"transform 0.3s"})},{default:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(n.Z))]),_:1},8,["style"]),(0,s._)("div",r,[(0,s.WI)(o.$slots,"title"),(0,s.Uk)(" "+(0,s.zw)(u?"":e.title),1)])]),(0,s.Wm)(c,{show:t.value},{default:(0,s.w5)(()=>[(0,s.WI)(o.$slots,"default")]),_:3},8,["show"])],64)}}})},39244:function(e,t,a){a.d(t,{Z:()=>s});var l=a(93953),i=a(58786);let s=(0,i.aZ)({__name:"index",setup(e){let t=!!(0,i.Rr)().toolsLeft,a=!!(0,i.Rr)().toolsRight,s=!!(0,i.Rr)().pageLeft||!!(0,i.Rr)().pageRight;return(e,n)=>{let r=l.Z;return(0,i.wg)(),(0,i.iD)("div",null,[t||a?((0,i.wg)(),(0,i.j4)(r,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,i.w5)(()=>[(0,i.Wm)(r,{class:"items-center",size:12},{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"toolsLeft")]),_:3}),(0,i.Wm)(r,{class:"items-center",size:12},{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"table"),(0,i.SU)(s)?((0,i.wg)(),(0,i.j4)(r,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,i.w5)(()=>[(0,i._)("div",null,[(0,i.WI)(e.$slots,"pageLeft")]),(0,i.Wm)(r,null,{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"modal")])}}})},88583:function(e,t,a){a.d(t,{Z:()=>s});var l=a(58786);let i={class:"bt-tips flex flex-col gap-4px list-outside list-disc leading-20px text-[#777]"},s=(0,a(41748).default)({},[["render",function(e,t){return(0,l.wg)(),(0,l.iD)("ul",i,[(0,l.WI)(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-8731a1b4"]])},25170:function(e,t,a){a.d(t,{Z:()=>r});var l=a(75459),i=a(58786),s=a(68271);let n={class:"ml-8px text-14px"},r=(0,i.aZ)({__name:"index",props:(0,i.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,i.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:a}=t,r=(0,i.Fl)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),u=(0,i.tT)(e,"page"),o=(0,i.tT)(e,"pageSize"),p=t=>{var l;null==(l=e.onUpdatePage)||l.call(e,t),a("refresh")},d=t=>{var l;u.value=1,null==(l=e.onUpdatePage)||l.call(e,1),c(t),a("refresh")},c=e=>{r.value&&(0,s.qQ)(r.value,String(e))};if(r.value){let e=(0,s.$o)(r.value);e&&(o.value=(0,s.Dx)(e))}return(e,t)=>{let a=l.Z;return(0,i.wg)(),(0,i.j4)(a,(0,i.dG)(e.$attrs,{page:u.value,"onUpdate:page":[t[0]||(t[0]=e=>u.value=e),p],"page-size":o.value,"onUpdate:pageSize":[t[1]||(t[1]=e=>o.value=e),d],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,i.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,i.w5)(e=>{let{itemCount:t}=e;return[(0,i._)("span",n," Total "+(0,i.zw)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},3194:function(e,t,a){a.r(t),a.d(t,{default:()=>eq});var l=a(39244),i=a(25170),s=a(60424),n=a(16893),r=a(57869),u=a(73084),o=a(8490),p=a(17977),d=a(58786),c=a(49468),m=a(36760),v=a(17987),_=a(68271),f=a(52495);let w={class:"date-filters"},g={class:"w-120px"},h={class:"w-240px"},k=(0,d.aZ)({__name:"index",props:(0,d.Vf)({defaultType:{type:String,default:"today"}},{value:{},valueModifiers:{}}),emits:(0,d.Vf)(["change"],["update:value"]),setup(e,t){let{emit:a}=t,l=(0,d.tT)(e,"value"),{t:i}=(0,f.QT)(),s=(0,d.iH)(e.defaultType),n=[{label:i("common.time.today"),value:"today"},{label:i("common.time.yesterday"),value:"yesterday"},{label:i("common.time.last7days"),value:"last7days"},{label:i("common.time.custom"),value:"custom"}],r=()=>{let e=new Date,t=(0,c.i)(e);return[(0,m.b)((0,v.E)(e,-6)).getTime(),t.getTime()]},u=e=>{switch(e){case"today":l.value=(0,_.wb)();break;case"yesterday":l.value=(0,_.wb)((0,v.E)(new Date,-1));break;case"last7days":l.value=r()}a("change")},k=e=>{let t=new Date,a=(0,v.E)(t,-30);return(0,m.b)(a).getTime()>e||(0,c.i)(t).getTime()<e},b=e=>{s.value="custom",l.value=[(0,m.b)(e[0]).getTime(),(0,c.i)(e[1]).getTime()],a("change")};return u(e.defaultType),(e,t)=>{let a=o.Z,i=p.Z;return(0,d.wg)(),(0,d.iD)("div",w,[(0,d._)("div",g,[(0,d.Wm)(a,{value:(0,d.SU)(s),"onUpdate:value":[t[0]||(t[0]=e=>(0,d.dq)(s)?s.value=e:null),u],options:n},null,8,["value"])]),(0,d._)("div",h,[(0,d.Wm)(i,{value:l.value,type:"daterange","is-date-disabled":k,"onUpdate:value":b},null,8,["value"])])])}}});var b=a(41748);let y=(0,b.default)(k,[["__scopeId","data-v-35dbb2f8"]]);var U=a(15496),S=a(53903),x=a(93953),W=a(80947),Z=a(51169),$=a(34541);let{t:z}=a(76882).ZP.global,P=e=>$.e.get("/batch_mail/api/list",{params:e}),j=e=>$.e.get("/batch_mail/api/overview_stats",{params:e}),C=e=>$.e.post("/batch_mail/api/create",e,{fetchOptions:{loading:z("api.loading.creating"),successMessage:!0}}),T=e=>$.e.post("/batch_mail/api/update",e,{fetchOptions:{loading:z("api.loading.updating"),successMessage:!0}}),R=e=>$.e.post("/batch_mail/api/delete",e,{fetchOptions:{loading:z("api.loading.deleting"),successMessage:!0}});var q=a(60579);let H={class:"flex gap-16px mb-24px"},D={class:"title"},I={class:"value"},E={class:"title"},F={class:"value"},K={class:"title"},M={class:"value"},O={class:"title"},N={class:"value"},L=(0,d.aZ)({__name:"Overview",props:{time:{type:Object,default:()=>[0,0]}},setup(e,t){let{expose:a}=t,l=(0,d.iH)({total_send:0,avg_delivery_rate:0,avg_open_rate:0,avg_click_rate:0,avg_bounce_rate:0,avg_unsub_rate:0,total_unsubscribe:0}),i=(0,d.iH)(!1),s=async()=>{try{i.value=!0;let t=await j({start_time:Math.floor(e.time[0]/1e3),end_time:Math.floor(e.time[1]/1e3)});(0,_.Kn)(t)&&(l.value=t)}finally{i.value=!1}};return a({getStats:s}),(0,d.bv)(()=>{s()}),(e,t)=>{let a=r.ZP,s=q.Z;return(0,d.wg)(),(0,d.j4)(s,{show:(0,d.SU)(i)},{default:(0,d.w5)(()=>[(0,d._)("div",H,[(0,d.Wm)(a,{class:"flex-1"},{default:(0,d.w5)(()=>[(0,d._)("div",D,[t[0]||(t[0]=(0,d._)("i",{class:"i-fa:paper-plane"},null,-1)),(0,d._)("span",null,(0,d.zw)(e.$t("api.overview.totalSend")),1)]),(0,d._)("div",I,(0,d.zw)((0,d.SU)(l).total_send),1)]),_:1}),(0,d.Wm)(a,{class:"flex-1"},{default:(0,d.w5)(()=>[(0,d._)("div",E,[t[1]||(t[1]=(0,d._)("i",{class:"i-fa:envelope-open"},null,-1)),(0,d._)("span",null,(0,d.zw)(e.$t("api.overview.avgOpenRate")),1)]),(0,d._)("div",F,(0,d.zw)((0,d.SU)(l).avg_open_rate)+"%",1)]),_:1}),(0,d.Wm)(a,{class:"flex-1"},{default:(0,d.w5)(()=>[(0,d._)("div",K,[t[2]||(t[2]=(0,d._)("i",{class:"i-fa:mouse-pointer"},null,-1)),(0,d._)("span",null,(0,d.zw)(e.$t("api.overview.avgClickRate")),1)]),(0,d._)("div",M,(0,d.zw)((0,d.SU)(l).avg_click_rate)+"%",1)]),_:1}),(0,d.Wm)(a,{class:"flex-1"},{default:(0,d.w5)(()=>[(0,d._)("div",O,[t[3]||(t[3]=(0,d._)("i",{class:"i-fa:ban"},null,-1)),(0,d._)("span",null,(0,d.zw)(e.$t("api.overview.avgBounceRate")),1)]),(0,d._)("div",N,(0,d.zw)((0,d.SU)(l).avg_bounce_rate)+"%",1)]),_:1})])]),_:1},8,["show"])}}}),A=(0,b.default)(L,[["__scopeId","data-v-da2d6552"]]);var Q=a(35409),V=a(77984);let B={class:"flex"},G={class:"w-0 flex-1 flex items-center"},J={class:"min-w-0"},X=(0,d.aZ)({__name:"ApiKey",props:{value:{default:""}},setup(e){let{copyText:t}=(0,V.F)(),a=async()=>{t(`${e.value}`)};return(e,t)=>{let l=Q.ZP;return(0,d.wg)(),(0,d.iD)("div",B,[(0,d._)("div",G,[(0,d._)("div",J,[(0,d.Wm)(l,{class:"max-w-full",tooltip:{contentStyle:{maxWidth:"300px"}}},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.value),1)]),_:1})]),(0,d._)("div",{class:"ml-6px text-15px cursor-pointer",title:"Copy",onClick:a},t[0]||(t[0]=[(0,d._)("i",{class:"i-mdi-content-copy"},null,-1)]))])])}}});var Y=a(46244),ee=a(76631),et=a(49942),ea=a(88583),el=a(29875),ei=a(6455),es=a(31651),en=a(54078),er=a(19664),eu=a(45223),eo=a(28444),ep=a(65302);let ed={class:"max-h-640px pt-8px overflow-auto"},ec={class:"flex-1"},em={class:"flex items-center justify-start gap-1.25"},ev=(0,d.aZ)({__name:"ApiForm",setup(e){let{t}=(0,f.QT)(),a=(0,d.iH)(!1),l=(0,d.Fl)(()=>a.value?t("api.form.title.edit"):t("api.form.title.add")),i=(0,d.AE)("formRef"),s=(0,d.qj)({id:0,api_name:"",template_id:null,template_content:"",subject:"",domain:null,addresser:null,full_name:"",unsubscribe:1,active:1,ip_whitelist:"",track_click:1,track_open:1,group_id:null}),n={api_name:{required:!0,message:t("api.form.validation.apiNameRequired")},addresser:{required:!0,message:t("api.form.validation.addresserRequired")},full_name:{required:!0,message:t("market.task.edit.displayNamePlaceholder")},subject:{required:!0,message:t("market.task.edit.subjectPlaceholder")},template_id:{required:!0,message:t("api.form.validation.templateRequired")}},[r,o]=(0,Z.d)({component:ep.Z}),p=e=>{o.setState({html:e}),o.open()},c=async()=>{let e=await (0,es.ij)({id:`${s.template_id}`});(0,_.Kn)(e)&&(2==e.add_type&&e.chat_id?window.open(`/template/ai-template/${e.chat_id}`):(v.setState({isEdit:!0,row:e}),v.open()))},[m,v]=(0,Z.d)({component:en.Z,state:{isEdit:!0,refresh:async()=>{let e=await (0,es.ij)({id:`${s.template_id}`});(0,_.Kn)(e)&&(s.template_content=e.html_content)},preview:e=>{p(e)}}}),w=()=>{s.id=0,s.api_name="",s.template_id=null,s.template_content="",s.subject="",s.addresser=null,s.full_name="",s.unsubscribe=1,s.active=1,s.ip_whitelist="",s.track_click=1,s.track_open=1,s.group_id=null},g=()=>({api_name:s.api_name,template_id:s.template_id||0,subject:s.subject,addresser:s.addresser||"",full_name:s.full_name,unsubscribe:s.unsubscribe,active:s.active,ip_whitelist:s.ip_whitelist.split(","),track_click:s.track_click,track_open:s.track_open,group_id:s.group_id||0}),[h,k]=(0,Z.d)({onChangeState:e=>{if(e){let e=k.getState(),{row:t}=e;a.value=e.isEdit,t&&(s.id=t.id,s.api_name=t.api_name,s.template_id=t.template_id,s.domain=t.addresser.split("@")[1],s.subject=t.subject,s.addresser=t.addresser,s.full_name=t.full_name,s.unsubscribe=t.unsubscribe,s.active=t.active,s.ip_whitelist=t.ip_whitelist.join(","),s.track_click=t.track_click,s.track_open=t.track_open,s.group_id=t.group_id||null)}else w()},onConfirm:async()=>{var e;await (null==(e=i.value)?void 0:e.validate());let t=g();a.value?await T({...t,id:s.id}):await C(t),k.getState().refresh()}});return(e,a)=>{let o=u.Z,v=ei.ZP,_=U.ZP,f=el.Z,w=ea.Z,g=et.ZP,k=ee.Z,b=Y.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(h),{title:(0,d.SU)(l),width:"560"},{default:(0,d.w5)(()=>[(0,d._)("div",ed,[(0,d.Wm)(b,{ref_key:"formRef",ref:i,model:(0,d.SU)(s),rules:n,class:"pr-12px"},{default:(0,d.w5)(()=>[(0,d.Wm)(v,{label:e.$t("api.form.apiName"),path:"api_name"},{default:(0,d.w5)(()=>[(0,d.Wm)(o,{value:(0,d.SU)(s).api_name,"onUpdate:value":a[0]||(a[0]=e=>(0,d.SU)(s).api_name=e),placeholder:e.$t("api.form.apiNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,d.Wm)(v,{label:e.$t("market.task.edit.from"),path:"addresser"},{default:(0,d.w5)(()=>[(0,d.Wm)(er.Z,{value:(0,d.SU)(s).addresser,"onUpdate:value":a[1]||(a[1]=e=>(0,d.SU)(s).addresser=e),domain:(0,d.SU)(s).domain,"onUpdate:domain":a[2]||(a[2]=e=>(0,d.SU)(s).domain=e),name:(0,d.SU)(s).full_name,"onUpdate:name":a[3]||(a[3]=e=>(0,d.SU)(s).full_name=e)},null,8,["value","domain","name"])]),_:1},8,["label"]),(0,d.Wm)(v,{label:e.$t("market.task.edit.displayName"),path:"full_name"},{default:(0,d.w5)(()=>[(0,d.Wm)(o,{value:(0,d.SU)(s).full_name,"onUpdate:value":a[4]||(a[4]=e=>(0,d.SU)(s).full_name=e),placeholder:e.$t("market.task.edit.displayNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,d.Wm)(v,{label:e.$t("market.task.edit.subject"),path:"subject"},{default:(0,d.w5)(()=>[(0,d.Wm)(o,{value:(0,d.SU)(s).subject,"onUpdate:value":a[5]||(a[5]=e=>(0,d.SU)(s).subject=e),placeholder:e.$t("market.task.edit.subjectPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,d.Wm)(v,{label:e.$t("market.task.edit.template"),path:"template_id"},{default:(0,d.w5)(()=>[(0,d._)("div",ec,[(0,d.Wm)(eo.Z,{value:(0,d.SU)(s).template_id,"onUpdate:value":a[6]||(a[6]=e=>(0,d.SU)(s).template_id=e),content:(0,d.SU)(s).template_content,"onUpdate:content":a[7]||(a[7]=e=>(0,d.SU)(s).template_content=e)},null,8,["value","content"])]),(0,d.Wm)(_,{text:"",type:"primary",class:"ml-12px",onClick:c},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("common.actions.edit")),1)]),_:1}),(0,d.Wm)(_,{text:"",type:"primary",class:"ml-12px",onClick:a[8]||(a[8]=e=>p((0,d.SU)(s).template_content))},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("common.actions.preview")),1)]),_:1})]),_:1},8,["label"]),(0,d.Wm)(v,{label:e.$t("api.form.status")},{default:(0,d.w5)(()=>[(0,d.Wm)(f,{value:(0,d.SU)(s).active,"onUpdate:value":a[9]||(a[9]=e=>(0,d.SU)(s).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,d.Wm)(k,null,{title:(0,d.w5)(()=>[(0,d._)("span",null,(0,d.zw)(e.$t("api.form.advancedFeatures")),1)]),default:(0,d.w5)(()=>[(0,d.Wm)(v,{label:e.$t("market.task.edit.unsubscribeLink")},{default:(0,d.w5)(()=>[(0,d.Wm)(f,{value:(0,d.SU)(s).unsubscribe,"onUpdate:value":a[10]||(a[10]=e=>(0,d.SU)(s).unsubscribe=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,d.Wm)(v,{label:(0,d.SU)(t)("market.task.edit.trackClick"),path:"track_click"},{default:(0,d.w5)(()=>[(0,d.Wm)(f,{value:(0,d.SU)(s).track_click,"onUpdate:value":a[11]||(a[11]=e=>(0,d.SU)(s).track_click=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,d.Wm)(v,{label:(0,d.SU)(t)("market.task.edit.trackOpen"),path:"track_open"},{default:(0,d.w5)(()=>[(0,d.Wm)(f,{value:(0,d.SU)(s).track_open,"onUpdate:value":a[12]||(a[12]=e=>(0,d.SU)(s).track_open=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,d.Wm)(v,{label:e.$t("api.form.ipWhitelist")},{default:(0,d.w5)(()=>[(0,d.Wm)(o,{value:(0,d.SU)(s).ip_whitelist,"onUpdate:value":a[13]||(a[13]=e=>(0,d.SU)(s).ip_whitelist=e),placeholder:e.$t("api.form.ipWhitelistPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,d.Wm)(v,null,{label:(0,d.w5)(()=>[(0,d._)("div",em,[(0,d._)("span",null,(0,d.zw)(e.$t("api.form.group.label")),1),(0,d.Wm)(g,{trigger:"hover"},{trigger:(0,d.w5)(()=>a[15]||(a[15]=[(0,d._)("i",{class:"i-custom:help"},null,-1)])),default:(0,d.w5)(()=>[(0,d.Wm)(w,null,{default:(0,d.w5)(()=>[(0,d._)("li",null,(0,d.zw)(e.$t("api.form.group.tips.choose")),1),(0,d._)("li",null,(0,d.zw)(e.$t("api.form.group.tips.autoCreate")),1)]),_:1})]),_:1})])]),default:(0,d.w5)(()=>[(0,d.Wm)(eu.Z,{value:(0,d.SU)(s).group_id,"onUpdate:value":a[14]||(a[14]=e=>(0,d.SU)(s).group_id=e),"show-create":!1,clearable:""},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["model"])]),(0,d.Wm)((0,d.SU)(m)),(0,d.Wm)((0,d.SU)(r))]),_:1},8,["title"])}}});var e_=a(26281),ef=a(41982);a(94812),a(59076);let ew={class:"flex items-center gap-16px w-full"},eg=["innerHTML"],eh=(0,d.aZ)({__name:"index",props:{code:{type:String,default:""},language:{type:String,default:"shell"}},setup(e){let t=(0,d.Fl)(()=>`\`\`\`${e.language}
${e.code}
\`\`\``),a=(0,d.Fl)(()=>e_.TU.parse(t.value)),{copyText:l}=(0,V.F)(),i=()=>{l(e.code)};return e_.TU.use({extensions:[{name:"highlight",level:"block",start(e){var t;return null==(t=e.match(/^```/))?void 0:t.index},tokenizer(e){let t=/^```([^\n]*?)\n([\s\S]*?)\n```/.exec(e);if(t)return{type:"highlight",raw:t[0],lang:t[1].trim(),code:t[2]}},renderer(e){let{lang:t,code:a}=e;if(t&&ef.Z.getLanguage(t)){let e=ef.Z.highlight(a,{language:t}).value;return`<pre><code class="hljs language-${t}">${e}</code></pre>`}return`<pre><code>${a}</code></pre>`}}]}),(e,t)=>{let l=U.ZP;return(0,d.wg)(),(0,d.iD)("div",ew,[(0,d._)("div",{class:"markdown-body flex-1 w-0",innerHTML:(0,d.SU)(a)},null,8,eg),(0,d.Wm)(l,{onClick:i},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("common.actions.copy")),1)]),_:1})])}}}),ek={class:"flex-1 mr-10px"},eb=(0,d.aZ)({__name:"ApiTest",setup(e){let{t}=(0,f.QT)(),a=(0,d.iH)(""),l=(0,d.Fl)(()=>a.value.replaceAll("$email",i.recipient)),i=(0,d.qj)({recipient:""}),s={recipient:{required:!0,message:t("market.task.edit.testEmailPlaceholder")}},n=()=>{i.recipient=""},[r,o]=(0,Z.d)({onChangeState:e=>{if(e){let{row:e}=o.getState();e&&(a.value=`curl -k -X POST '${e.server_addresser}' \\
-H 'X-API-Key: ${e.api_key}' \\
-H 'Content-Type: application/json' \\
-d '{
	"recipient": "$email"
}'`)}else n()}});return(e,t)=>{let a=u.Z,n=ei.ZP,o=Y.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(r),{title:"Test API",width:"720",footer:!1},{default:(0,d.w5)(()=>[(0,d.Wm)(o,{ref:"formRef",model:(0,d.SU)(i),rules:s,class:"pt-12px"},{default:(0,d.w5)(()=>[(0,d.Wm)(n,{label:e.$t("market.task.edit.testEmail"),path:"recipient"},{default:(0,d.w5)(()=>[(0,d._)("div",ek,[(0,d.Wm)(a,{value:(0,d.SU)(i).recipient,"onUpdate:value":t[0]||(t[0]=e=>(0,d.SU)(i).recipient=e),placeholder:e.$t("market.task.edit.testEmailPlaceholder")},null,8,["value","placeholder"])])]),_:1},8,["label"]),(0,d.Wm)(n,{label:"Command"},{default:(0,d.w5)(()=>[(0,d.Wm)(eh,{code:(0,d.SU)(l),language:"bash"},null,8,["code"])]),_:1})]),_:1},8,["model"])]),_:1})}}}),ey={class:"p-24px"},eU={class:"bt-title"},eS={class:"flex flex-wrap items-center gap-16px"},ex={class:"flex items-center whitespace-pre"},eW={class:"text-default"},eZ={class:"flex items-center whitespace-pre"},e$={class:"text-default"},ez={class:"w-120px"},eP={class:"flex items-center whitespace-pre"},ej={class:"text-default"},eC={class:"w-200px"},eT={class:"flex gap-8px"};function eR(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,d.lA)(e)}let eq=(0,d.aZ)({__name:"index",setup(e){let{t}=(0,f.QT)(),a=(0,d.AE)("overviewRef"),p=[{label:t("api.statusOptions.all"),value:-1},{label:t("api.statusOptions.active"),value:1},{label:t("api.statusOptions.inactive"),value:0}],c=(0,d.iH)([{key:"api_name",title:t("api.columns.apiName"),maxWidth:120,render:e=>(0,d.Wm)(U.ZP,{type:"primary",text:!0,onClick:()=>{z(e)}},{default:()=>[e.api_name]})},{key:"api_key",title:t("api.columns.apiKey"),width:"28%",maxWidth:160,render:e=>(0,d.Wm)(X,{class:"w-94%",value:e.api_key},null)},{key:"send_count",title:t("api.columns.sendCount"),width:"9%",maxWidth:100},{key:"open_rate",title:t("api.columns.openRate"),width:"9%",maxWidth:100,render:e=>`${e.open_rate}%`},{key:"click_rate",title:t("api.columns.clickRate"),width:"9%",maxWidth:100,render:e=>`${e.click_rate}%`},{key:"bounce_rate",title:t("api.columns.bounceRate"),width:"9%",maxWidth:100,render:e=>`${e.bounce_rate}%`},{key:"active",title:t("api.columns.status"),width:"8%",maxWidth:80,render:e=>(0,d.Wm)(S.ZP,{size:"small",type:e.active?"primary":"warning",bordered:!1},{default:()=>[e.active?t("api.statusLabels.active"):t("api.statusLabels.inactive")]})},{title:t("common.columns.actions"),key:"actions",align:"right",width:160,render:e=>{let a,l,i;return(0,d.Wm)(x.Z,{inline:!0},{default:()=>[(0,d.Wm)(U.ZP,{type:"primary",text:!0,onClick:()=>{T(e)}},eR(a=t("common.actions.test"))?a:{default:()=>[a]}),(0,d.Wm)(U.ZP,{type:"primary",text:!0,onClick:()=>{z(e)}},eR(l=t("common.actions.edit"))?l:{default:()=>[l]}),(0,d.Wm)(U.ZP,{type:"error",text:!0,onClick:()=>{q(e)}},eR(i=t("common.actions.delete"))?i:{default:()=>[i]})]})}}]),{tableParams:m,tableProps:v,pageProps:w,fetchTable:g}=(0,W.N)({params:{page:1,page_size:10,keyword:"",active:-1,time_range:[0,0]},immediate:!1,fetchFn:P,useParams:e=>({page:e.page,page_size:e.page_size,keyword:e.keyword,active:e.active,start_time:Math.floor(e.time_range[0]/1e3),end_time:Math.floor(e.time_range[1]/1e3)})}),h=async()=>{var e;null==(e=a.value)||e.getStats(),g()},[k,b]=(0,Z.d)({component:ev,state:{isEdit:!1,refresh:g}}),$=()=>{b.setState({row:null,isEdit:!1}),b.open()},z=e=>{b.setState({row:e,isEdit:!0}),b.open()},[j,C]=(0,Z.d)({component:eb,state:{row:null}}),T=e=>{C.setState({row:e}),C.open()},q=e=>{(0,_.iG)({title:t("api.confirmDelete.title",{apiName:e.api_name}),content:t("api.confirmDelete.content"),onConfirm:async()=>{await R({id:e.id}),g()}})};return(0,d.bv)(()=>{g()}),(e,t)=>{let _=o.Z,f=u.Z,b=r.ZP,S=n.Z,x=s.Z,W=i.Z,Z=l.Z;return(0,d.wg)(),(0,d.iD)("div",ey,[(0,d._)("div",eU,(0,d.zw)(e.$t("api.title")),1),(0,d.Wm)(b,{class:"mb-24px","content-style":{padding:"16px 24px"}},{default:(0,d.w5)(()=>[(0,d._)("div",eS,[(0,d._)("div",ex,[(0,d._)("span",eW,(0,d.zw)(e.$t("api.timeRange")),1),(0,d.Wm)(y,{value:(0,d.SU)(m).time_range,"onUpdate:value":t[0]||(t[0]=e=>(0,d.SU)(m).time_range=e),"default-type":"last7days",onChange:h},null,8,["value"])]),(0,d._)("div",eZ,[(0,d._)("span",e$,(0,d.zw)(e.$t("api.status")),1),(0,d._)("div",ez,[(0,d.Wm)(_,{value:(0,d.SU)(m).active,"onUpdate:value":[t[1]||(t[1]=e=>(0,d.SU)(m).active=e),t[2]||(t[2]=()=>(0,d.SU)(g)(!0))],options:p},null,8,["value"])])]),(0,d._)("div",eP,[(0,d._)("span",ej,(0,d.zw)(e.$t("api.search")),1),(0,d._)("div",eC,[(0,d.Wm)(f,{value:(0,d.SU)(m).keyword,"onUpdate:value":t[3]||(t[3]=e=>(0,d.SU)(m).keyword=e),placeholder:e.$t("api.searchPlaceholder"),onKeyup:t[4]||(t[4]=(0,d.D2)(()=>(0,d.SU)(g)(!0),["enter"]))},null,8,["value","placeholder"])])]),(0,d._)("div",eT,[(0,d.Wm)((0,d.SU)(U.ZP),{type:"primary",ghost:"",onClick:t[5]||(t[5]=()=>(0,d.SU)(g)())},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("common.actions.search")),1)]),_:1}),(0,d.Wm)((0,d.SU)(U.ZP),{type:"primary",ghost:"",onClick:h},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("api.refreshData")),1)]),_:1})])])]),_:1}),(0,d.Wm)(A,{ref_key:"overviewRef",ref:a,time:(0,d.SU)(m).time_range},null,8,["time"]),(0,d.Wm)(Z,null,{toolsLeft:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(U.ZP),{type:"primary",onClick:$},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("api.createNew")),1)]),_:1}),(0,d.Wm)(S,{href:"https://www.billionmail.com/start/api_mail_guide.html",text:e.$t("common.actions.help")},null,8,["text"])]),table:(0,d.w5)(()=>[(0,d.Wm)(x,(0,d.dG)((0,d.SU)(v),{columns:(0,d.SU)(c)}),null,16,["columns"])]),pageRight:(0,d.w5)(()=>[(0,d.Wm)(W,(0,d.dG)((0,d.SU)(w),{onRefresh:(0,d.SU)(g)}),null,16,["onRefresh"])]),modal:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(k)),(0,d.Wm)((0,d.SU)(j))]),_:1})])}}})},65302:function(e,t,a){a.d(t,{Z:()=>n});var l=a(53472),i=a(58786),s=a(51169);let n=(0,i.aZ)({__name:"TemplatePreview",setup(e){let t=(0,i.iH)(""),[a,n]=(0,s.d)({onChangeState:e=>{e&&(t.value=n.getState().html||"")}});return(e,s)=>{let n=l.Z;return(0,i.wg)(),(0,i.j4)((0,i.SU)(a),{title:e.$t("market.template.preview.title"),width:"820",footer:!1},{default:(0,i.w5)(()=>[(0,i.Wm)(n,{height:580,value:(0,i.SU)(t)},null,8,["value"])]),_:1},8,["title"])}}})}}]);