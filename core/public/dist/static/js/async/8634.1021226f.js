"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["8634"],{84075:function(e,a,t){t.d(a,{WH:()=>o,Z2:()=>d,gV:()=>m,hI:()=>s,iE:()=>c,mD:()=>p,sS:()=>u,uz:()=>g,yG:()=>r,yL:()=>n});var l=t(34541);let{t:i}=t(76882).ag.global,s=e=>l.e.get("/contact/group/list",{params:e}),o=()=>l.e.get("/contact/group/all"),n=e=>l.e.get("/contact/group/info",{params:e}),u=e=>l.e.post("/contact/group/create",e,{fetchOptions:{loading:i("contacts.group.loading.createGroup"),successMessage:!0}}),p=e=>l.e.post("/contact/group/update",e,{fetchOptions:{loading:i("contacts.group.loading.updateGroup"),successMessage:!0}}),c=e=>l.e.post("/contact/group/delete",e,{fetchOptions:{loading:i("contacts.group.loading.deleteGroup"),successMessage:!0}}),d=e=>l.e.post("/contact/group/tag_contact_count",e),r=e=>l.e.post("/contact/group/export",e,{responseType:"blob",fetchOptions:{loading:i("contacts.group.loading.exportGroup"),successMessage:!0}}),g=e=>l.e.post("/contact/group/update",e,{fetchOptions:{loading:i("contacts.group.loading.saveSettings"),successMessage:!0}}),m=e=>l.e.post("/contact/group/update_unsubscribe",e,{fetchOptions:{loading:i("contacts.group.loading.saveSettings"),successMessage:!0}})},39432:function(e,a,t){t.d(a,{Aj:()=>y,Au:()=>r,Fj:()=>u,LC:()=>o,Lb:()=>_,M7:()=>b,OV:()=>d,dj:()=>c,gK:()=>p,i7:()=>s,nf:()=>h,qt:()=>n,rU:()=>v,v1:()=>g,xh:()=>f,yW:()=>m});var l=t(34541);let{t:i}=t(76882).ZP.global,s=e=>l.e.get("/domains/list",{params:e}),o=()=>l.e.get("/domains/all"),n=()=>l.e.post("/multi_ip_domain/apply"),u=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),p=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),c=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),d=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),r=e=>l.e.get("/domains/get_ssl",{params:e}),g=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),m=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}}),f=e=>l.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:i("domain.api.loading.settingDefault"),successMessage:!0}}),v=e=>l.e.post("/askai/project/create",e,{fetchOptions:{loading:i("domain.api.loading.settingBrandInfo"),successMessage:!0}}),b=e=>l.e.post("/multi_ip_domain/test",e,{fetchOptions:{loading:i("domain.api.loading.testingConnection"),successMessage:!0}}),_=()=>l.e.post("/askai/supplier/status"),h=e=>l.e.post("/domain_blocklist/check",e,{fetchOptions:{loading:i("domain.api.loading.detecting"),successMessage:!0}}),y=e=>l.e.get("/domain_blocklist/logs",{params:e})},67127:function(e,a,t){t.d(a,{EV:()=>u,H2:()=>d,Ts:()=>o,WS:()=>p,Yi:()=>n,iC:()=>s,ym:()=>c});var l=t(34541);let{t:i}=t(76882).ZP.global,s=e=>l.e.get("/mailbox/list",{params:e}),o=e=>l.e.post("/mailbox/create",e,{fetchOptions:{loading:i("mailbox.api.loading.creating"),successMessage:!0}}),n=e=>l.e.post("/mailbox/batch_create",e,{fetchOptions:{loading:i("mailbox.api.loading.creating"),successMessage:!0}}),u=e=>l.e.post("/mailbox/update",e,{fetchOptions:{loading:i("mailbox.api.loading.updating"),successMessage:!0}}),p=e=>l.e.post("/mailbox/delete",e,{fetchOptions:{loading:i("mailbox.api.loading.deleting"),successMessage:!0}}),c=e=>l.e.post("/mailbox/export",e,{responseType:"blob",fetchOptions:{loading:i("mailbox.api.loading.exporting"),successMessage:!0}}),d=e=>l.e.post("/mailbox/import",e,{fetchOptions:{loading:i("mailbox.api.loading.importing"),successMessage:!0}})},31651:function(e,a,t){t.d(a,{A8:()=>o,NI:()=>n,QB:()=>c,WF:()=>p,Xc:()=>r,ef:()=>d,ij:()=>u});var l=t(76882),i=t(34541);let{t:s}=l.ZP.global;function o(e){return i.e.get("/email_template/list",{params:e})}function n(){return i.e.get("/email_template/all")}function u(e){return i.e.get("/email_template/get",{params:e})}function p(e){return i.e.post("/email_template/create",e,{fetchOptions:{loading:s("market.template.loading.creating"),successMessage:!0}})}function c(e){return i.e.post("/email_template/update",e,{fetchOptions:{loading:s("market.template.loading.updating"),successMessage:!0}})}function d(e){return i.e.post("/email_template/copy",e,{fetchOptions:{loading:s("market.template.loading.copying"),successMessage:!0}})}function r(e){return i.e.post("/email_template/delete",e,{fetchOptions:{loading:s("market.template.loading.deleting"),successMessage:!0}})}},53472:function(e,a,t){t.d(a,{Z:()=>s});var l=t(58786);let i=["height","srcdoc"],s=(0,l.aZ)({__name:"index",props:{value:{type:String,default:""},height:{type:[String,Number],default:"100%"}},setup:e=>(a,t)=>((0,l.wg)(),(0,l.iD)("iframe",{width:"100%",height:e.height,srcdoc:e.value,style:{border:"none",borderRadius:"4px"}},null,8,i))})},19664:function(e,a,t){t.d(a,{Z:()=>c});var l=t(8490),i=t(58786),s=t(68271),o=t(39432),n=t(67127);let u={class:"flex-1"},p={class:"flex-1 ml-10px"},c=(0,i.aZ)({__name:"FromSelect",props:{value:{},valueModifiers:{},name:{},nameModifiers:{},domain:{},domainModifiers:{}},emits:["update:value","update:name","update:domain"],setup(e){let a=(0,i.tT)(e,"value"),t=(0,i.tT)(e,"name"),c=(0,i.iH)(!1),d=(0,i.tT)(e,"domain"),r=(0,i.iH)([]),g=(0,i.iH)([]),m=(0,i.Fl)(()=>g.value.filter(e=>e.domain===d.value).map(e=>({label:e.username,value:e.username,data:e}))),f=async()=>{await (0,i.Y3)(),m.value.length>0?(a.value=m.value[0].value,v(a.value,m.value[0])):(a.value=null,t.value="")},v=(e,a)=>{let{data:l}=a;(0,s.Kn)(l)&&(t.value=l.full_name)},b=async()=>{let e=await (0,o.LC)();if((0,s.kJ)(e)&&(r.value=e.map(e=>({label:e.domain,value:e.domain})),!d.value&&e.length>0)){let a=e.filter(e=>e.default);a.length>0?d.value=a[0].domain:d.value=e[0].domain}},_=async()=>{let e=await (0,n.iC)({page:1,page_size:1e3,domain:""});(0,s.Kn)(e)&&(g.value=e.list)};return(async()=>{try{c.value=!0,await _(),await b(),await (0,i.Y3)(),null===a.value?f():a.value&&(d.value=a.value.split("@")[1])}finally{c.value=!1}})(),(e,t)=>{let s=l.Z;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",u,[(0,i.Wm)(s,{value:d.value,"onUpdate:value":[t[0]||(t[0]=e=>d.value=e),f],loading:(0,i.SU)(c),options:(0,i.SU)(r)},null,8,["value","loading","options"])]),(0,i._)("div",p,[(0,i.Wm)(s,{value:a.value,"onUpdate:value":[t[1]||(t[1]=e=>a.value=e),v],loading:(0,i.SU)(c),options:(0,i.SU)(m),filterable:!0},null,8,["value","loading","options"])])],64)}}})},45223:function(e,a,t){t.d(a,{Z:()=>S});var l=t(15496),i=t(8490),s=t(58786),o=t(68271),n=t(51169),u=t(84075),p=t(46244),c=t(3179),d=t(6455),r=t(73084),g=t(46471),m=t(98003),f=t(52495);let v={class:"pt-12px"},b={class:"flex-1"},_={class:"mt-8px text-12px text-desc"},h=`email,attributes
example1@example.com,"{""age"": ""13"", ""Gender"": ""XXX""}"
example2@example.com,"{""age"": ""45"", ""city"": ""XXX""}"
`,y=(0,s.aZ)({__name:"CreateGroup",setup(e){let{t:a}=(0,f.QT)(),t=(0,s.AE)("formRef"),y=(0,s.qj)({create_type:2,name:"",file_data:"",file_type:"",description:"",status:1,double_optin:0}),x={name:{required:!0,message:a("market.task.createGroup.validation.groupNameRequired"),trigger:["blur","input"]}},w=[{label:"Confirmed",value:1},{label:"Unconfirmed",value:0}],k=e=>{let a=new FileReader;a.onload=a=>{var t;y.file_type=e.name.substring(e.name.lastIndexOf(".")+1),y.file_data=null==(t=a.target)?void 0:t.result},e.file&&a.readAsText(e.file)},S=async()=>{await (0,m.Sv)({file_path:"./template/example_recipients.csv"})},M=async()=>{var e;if(await (null==(e=t.value)?void 0:e.validate()),(0,g.Z)(y.file_data))return o.v0.error(a("contacts.subscribers.import.validation.fileRequired")),Promise.reject()},[U,O]=(0,n.d)({onChangeState:e=>{e&&(y.name="",y.file_data="",y.file_type="")},onConfirm:async()=>{await M(),await (0,u.sS)((0,s.IU)(y));let e=O.getState();null==e||e.refresh()}});return(e,o)=>{let n=r.Z,u=d.ZP,g=i.Z,m=c.Z,f=l.ZP,M=p.Z;return(0,s.wg)(),(0,s.j4)((0,s.SU)(U),{title:(0,s.SU)(a)("market.task.createGroup.title"),width:"500"},{default:(0,s.w5)(()=>[(0,s._)("div",v,[(0,s.Wm)(M,{ref_key:"formRef",ref:t,model:(0,s.SU)(y),rules:x},{default:(0,s.w5)(()=>[(0,s.Wm)(u,{label:(0,s.SU)(a)("market.task.createGroup.groupName"),path:"name"},{default:(0,s.w5)(()=>[(0,s.Wm)(n,{value:(0,s.SU)(y).name,"onUpdate:value":o[0]||(o[0]=e=>(0,s.SU)(y).name=e),placeholder:(0,s.SU)(a)("market.task.createGroup.groupNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,s.Wm)(u,{label:"Status"},{default:(0,s.w5)(()=>[(0,s.Wm)(g,{value:(0,s.SU)(y).status,"onUpdate:value":o[1]||(o[1]=e=>(0,s.SU)(y).status=e),options:w},null,8,["value"])]),_:1}),(0,s.Wm)(u,{label:(0,s.SU)(a)("market.task.createGroup.email"),path:"file_data"},{default:(0,s.w5)(()=>[(0,s._)("div",b,[(0,s.Wm)(m,{"is-upload":!1,accept:["csv"],onChange:k}),(0,s._)("div",_,[(0,s.Uk)((0,s.zw)(e.$t("contacts.subscribers.import.fileTypeHint"))+" ",1),(0,s.Wm)(f,{text:"",type:"primary",onClick:S},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.$t("common.actions.download")),1)]),_:1})])])]),_:1},8,["label"]),(0,s.Wm)(u,{label:e.$t("contacts.subscribers.import.exampleCsvLabel")},{default:(0,s.w5)(()=>[(0,s._)("pre",{class:"csv-example"},(0,s.zw)(h))]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"])}}}),x=(0,t(41748).default)(y,[["__scopeId","data-v-5210e9fa"]]),w={class:"flex-1"},k={key:0,class:"ml-12px"},S=(0,s.aZ)({__name:"GroupSelect",props:(0,s.Vf)({disabled:{type:Boolean,default:!1},showCreate:{type:Boolean,default:!0},clearable:{type:Boolean,default:!1}},{value:{default:()=>0},valueModifiers:{},label:{default:()=>""},labelModifiers:{}}),emits:["update:value","update:label"],setup(e){let a=(0,s.tT)(e,"value"),t=(0,s.tT)(e,"label"),p=(0,s.iH)(!1),c=(0,s.iH)([]),[d,r]=(0,n.d)({component:x,state:{refresh:()=>{f()}}}),g=()=>{r.open()},m=async(e,a)=>{t.value=`${a.label}`},f=async()=>{try{p.value=!0;let e=await (0,u.WH)();(0,o.Kn)(e)&&(c.value=e.list.map(e=>({label:e.name,value:e.id})))}finally{p.value=!1}};return f(),(t,o)=>{let n=i.Z,u=l.ZP;return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",w,[(0,s.Wm)(n,{value:a.value,"onUpdate:value":[o[0]||(o[0]=e=>a.value=e),m],options:(0,s.SU)(c),filterable:!0,clearable:e.clearable,disabled:e.disabled,"max-tag-count":"responsive",loading:(0,s.SU)(p),placeholder:t.$t("market.task.edit.recipientsPlaceholder")},null,8,["value","options","clearable","disabled","loading","placeholder"])]),e.showCreate?((0,s.wg)(),(0,s.iD)("div",k,[(0,s.Wm)(u,{text:"",type:"primary",onClick:g},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(t.$t("common.actions.create")),1)]),_:1})])):(0,s.kq)("",!0),(0,s.Wm)((0,s.SU)(d))],64)}}})},28444:function(e,a,t){t.d(a,{Z:()=>n});var l=t(8490),i=t(58786),s=t(68271),o=t(31651);let n=(0,i.aZ)({__name:"TemplateSelect",props:{value:{},valueModifiers:{},content:{},contentModifiers:{}},emits:(0,i.Vf)(["listReady"],["update:value","update:content"]),setup(e,a){let{emit:t}=a,n=(0,i.tT)(e,"value"),u=(0,i.tT)(e,"content"),p=(0,i.iH)(!1),c=(0,i.iH)([]),d=(e,a)=>{let{data:t}=a;(0,s.Kn)(t)&&(u.value=t.html_content)};return(async()=>{try{p.value=!0;let e=await (0,o.NI)();if((0,s.kJ)(e)){if(c.value=e.map(e=>({label:e.temp_name,value:e.id,data:e})),null===n.value)n.value=e[0].id,u.value=e[0].html_content;else{let a=e.find(e=>e.id===n.value);a&&(u.value=a.html_content)}t("listReady",e)}}finally{p.value=!1}})(),(e,a)=>{let t=l.Z;return(0,i.wg)(),(0,i.j4)(t,{value:n.value,"onUpdate:value":[a[0]||(a[0]=e=>n.value=e),d],loading:(0,i.SU)(p),filterable:!0,options:(0,i.SU)(c)},null,8,["value","loading","options"])}}})}}]);