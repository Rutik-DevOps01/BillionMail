"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["9372"],{67127:function(e,a,t){t.d(a,{EV:()=>o,H2:()=>d,Ts:()=>s,WS:()=>r,Yi:()=>u,iC:()=>n,ym:()=>p});var l=t(34541);let{t:i}=t(76882).ZP.global,n=e=>l.e.get("/mailbox/list",{params:e}),s=e=>l.e.post("/mailbox/create",e,{fetchOptions:{loading:i("mailbox.api.loading.creating"),successMessage:!0}}),u=e=>l.e.post("/mailbox/batch_create",e,{fetchOptions:{loading:i("mailbox.api.loading.creating"),successMessage:!0}}),o=e=>l.e.post("/mailbox/update",e,{fetchOptions:{loading:i("mailbox.api.loading.updating"),successMessage:!0}}),r=e=>l.e.post("/mailbox/delete",e,{fetchOptions:{loading:i("mailbox.api.loading.deleting"),successMessage:!0}}),p=e=>l.e.post("/mailbox/export",e,{responseType:"blob",fetchOptions:{loading:i("mailbox.api.loading.exporting"),successMessage:!0}}),d=e=>l.e.post("/mailbox/import",e,{fetchOptions:{loading:i("mailbox.api.loading.importing"),successMessage:!0}})},77984:function(e,a,t){t.d(a,{F:()=>s});var l=t(68271),i=t(94821),n=t(76882);let s=()=>{let{t:e}=n.ZP.global,{copy:a,isSupported:t,copied:s}=(0,i.VPI)({legacy:!0});return{copied:s,copyText:async function(i){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(!i)return void l.v0.error(e("common.useCopy.noText"));t.value?(await a(i),n&&l.v0.success(e("common.useCopy.success"))):l.v0.error(e("common.useCopy.failed"))}}}},80947:function(e,a,t){t.d(a,{N:()=>s});var l=t(22895),i=t(68271),n=t(58786);let s=e=>{let{params:a,fetchFn:t,useParams:s,loading:u=!0,immediate:o=!0,rowKey:r=e=>e.id}=e,p=(0,n.iH)(u),d=(0,n.iH)([]),c=(0,n.iH)(0),m=(0,n.iH)(a),v=(0,n.iH)([]),_=()=>s?s(m.value):m.value,f=(0,l.DI)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(m.value.page=1),p.value=!0;try{let e=_(),a=await t(e);(0,i.Kn)(a)&&(d.value=(0,i.kJ)(a.list)?a.list:[],c.value=(0,i.hj)(a.total)?a.total:0)}finally{v.value=[],p.value=!1}},300),g=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f(e)},w=e=>{m.value.page=e},h=e=>{m.value.page_size=e};return(0,n.bv)(()=>{o&&g()}),{tableData:d,tableTotal:c,tableKeys:v,tableParams:m,fetchTable:g,resetTable:()=>g(!0),tableProps:(0,n.Fl)(()=>({rowKey:r,data:d.value,loading:p.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),batchProps:(0,n.Fl)(()=>({rowKey:r,data:d.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),pageProps:(0,n.Fl)(()=>({page:m.value.page,pageSize:m.value.page_size,itemCount:c.value,onUpdatePage:w,onUpdatePageSize:h}))}}},16893:function(e,a,t){t.d(a,{Z:()=>s});var l=t(15496),i=t(58786);let n={class:"mr-4px"},s=(0,i.aZ)({__name:"index",props:{href:{type:String,default:""},text:{type:String,default:""}},setup(e){let a=()=>{window.open(e.href)};return(t,s)=>{let u=l.ZP;return(0,i.wg)(),(0,i.j4)(u,{text:"",onClick:a},{default:(0,i.w5)(()=>[(0,i._)("span",n,(0,i.zw)(e.text||t.$t("common.actions.help")),1),s[0]||(s[0]=(0,i._)("i",{class:"i-custom:help text-primary"},null,-1))]),_:1,__:[0]})}}})},39244:function(e,a,t){t.d(a,{Z:()=>n});var l=t(93953),i=t(58786);let n=(0,i.aZ)({__name:"index",setup(e){let a=!!(0,i.Rr)().toolsLeft,t=!!(0,i.Rr)().toolsRight,n=!!(0,i.Rr)().pageLeft||!!(0,i.Rr)().pageRight;return(e,s)=>{let u=l.Z;return(0,i.wg)(),(0,i.iD)("div",null,[a||t?((0,i.wg)(),(0,i.j4)(u,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,i.w5)(()=>[(0,i.Wm)(u,{class:"items-center",size:12},{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"toolsLeft")]),_:3}),(0,i.Wm)(u,{class:"items-center",size:12},{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"table"),(0,i.SU)(n)?((0,i.wg)(),(0,i.j4)(u,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,i.w5)(()=>[(0,i._)("div",null,[(0,i.WI)(e.$slots,"pageLeft")]),(0,i.Wm)(u,null,{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"modal")])}}})},25170:function(e,a,t){t.d(a,{Z:()=>u});var l=t(75459),i=t(58786),n=t(68271);let s={class:"ml-8px text-14px"},u=(0,i.aZ)({__name:"index",props:(0,i.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,i.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,a){let{emit:t}=a,u=(0,i.Fl)(()=>{let{storeKey:a}=e;return a?`${a}-page`:""}),o=(0,i.tT)(e,"page"),r=(0,i.tT)(e,"pageSize"),p=a=>{var l;null==(l=e.onUpdatePage)||l.call(e,a),t("refresh")},d=a=>{var l;o.value=1,null==(l=e.onUpdatePage)||l.call(e,1),c(a),t("refresh")},c=e=>{u.value&&(0,n.qQ)(u.value,String(e))};if(u.value){let e=(0,n.$o)(u.value);e&&(r.value=(0,n.Dx)(e))}return(e,a)=>{let t=l.Z;return(0,i.wg)(),(0,i.j4)(t,(0,i.dG)(e.$attrs,{page:o.value,"onUpdate:page":[a[0]||(a[0]=e=>o.value=e),p],"page-size":r.value,"onUpdate:pageSize":[a[1]||(a[1]=e=>r.value=e),d],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,i.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,i.w5)(e=>{let{itemCount:a}=e;return[(0,i._)("span",s," Total "+(0,i.zw)(a),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},3194:function(e,a,t){t.r(a),t.d(a,{default:()=>ej});var l=t(39244),i=t(25170),n=t(60424),s=t(16893),u=t(57869),o=t(73084),r=t(8490),p=t(17977),d=t(58786),c=t(49468),m=t(36760),v=t(17987),_=t(68271),f=t(52495);let g={class:"date-filters"},w={class:"w-120px"},h={class:"w-240px"},k=(0,d.aZ)({__name:"index",props:(0,d.Vf)({defaultType:{type:String,default:"today"}},{value:{},valueModifiers:{}}),emits:(0,d.Vf)(["change"],["update:value"]),setup(e,a){let{emit:t}=a,l=(0,d.tT)(e,"value"),{t:i}=(0,f.QT)(),n=(0,d.iH)(e.defaultType),s=[{label:i("common.time.today"),value:"today"},{label:i("common.time.yesterday"),value:"yesterday"},{label:i("common.time.last7days"),value:"last7days"},{label:i("common.time.custom"),value:"custom"}],u=()=>{let e=new Date,a=(0,c.i)(e);return[(0,m.b)((0,v.E)(e,-6)).getTime(),a.getTime()]},o=e=>{switch(e){case"today":l.value=(0,_.wb)();break;case"yesterday":l.value=(0,_.wb)((0,v.E)(new Date,-1));break;case"last7days":l.value=u()}t("change")},k=e=>{let a=new Date,t=(0,v.E)(a,-30);return(0,m.b)(t).getTime()>e||(0,c.i)(a).getTime()<e},b=e=>{n.value="custom",l.value=[(0,m.b)(e[0]).getTime(),(0,c.i)(e[1]).getTime()],t("change")};return o(e.defaultType),(e,a)=>{let t=r.Z,i=p.Z;return(0,d.wg)(),(0,d.iD)("div",g,[(0,d._)("div",w,[(0,d.Wm)(t,{value:(0,d.SU)(n),"onUpdate:value":[a[0]||(a[0]=e=>(0,d.dq)(n)?n.value=e:null),o],options:s},null,8,["value"])]),(0,d._)("div",h,[(0,d.Wm)(i,{value:l.value,type:"daterange","is-date-disabled":k,"onUpdate:value":b},null,8,["value"])])])}}});var b=t(41748);let y=(0,b.default)(k,[["__scopeId","data-v-35dbb2f8"]]);var U=t(15496),S=t(53903),x=t(93953),W=t(80947),Z=t(51169),$=t(34541);let{t:z}=t(76882).ZP.global,P=e=>$.e.get("/batch_mail/api/list",{params:e}),j=e=>$.e.get("/batch_mail/api/overview_stats",{params:e}),T=e=>$.e.post("/batch_mail/api/create",e,{fetchOptions:{loading:z("api.loading.creating"),successMessage:!0}}),C=e=>$.e.post("/batch_mail/api/update",e,{fetchOptions:{loading:z("api.loading.updating"),successMessage:!0}}),R=e=>$.e.post("/batch_mail/api/delete",e,{fetchOptions:{loading:z("api.loading.deleting"),successMessage:!0}});var H=t(60579);let M={class:"flex gap-16px mb-24px"},O={class:"title"},q={class:"value"},K={class:"title"},D={class:"value"},E={class:"title"},F={class:"value"},I={class:"title"},N={class:"value"},L=(0,d.aZ)({__name:"Overview",props:{time:{type:Object,default:()=>[0,0]}},setup(e,a){let{expose:t}=a,l=(0,d.iH)({total_send:0,avg_delivery_rate:0,avg_open_rate:0,avg_click_rate:0,avg_bounce_rate:0,avg_unsub_rate:0,total_unsubscribe:0}),i=(0,d.iH)(!1),n=async()=>{try{i.value=!0;let a=await j({start_time:Math.floor(e.time[0]/1e3),end_time:Math.floor(e.time[1]/1e3)});(0,_.Kn)(a)&&(l.value=a)}finally{i.value=!1}};return t({getStats:n}),(0,d.bv)(()=>{n()}),(e,a)=>{let t=u.ZP,n=H.Z;return(0,d.wg)(),(0,d.j4)(n,{show:(0,d.SU)(i)},{default:(0,d.w5)(()=>[(0,d._)("div",M,[(0,d.Wm)(t,{class:"flex-1"},{default:(0,d.w5)(()=>[(0,d._)("div",O,[a[0]||(a[0]=(0,d._)("i",{class:"i-fa:paper-plane"},null,-1)),(0,d._)("span",null,(0,d.zw)(e.$t("api.overview.totalSend")),1)]),(0,d._)("div",q,(0,d.zw)((0,d.SU)(l).total_send),1)]),_:1}),(0,d.Wm)(t,{class:"flex-1"},{default:(0,d.w5)(()=>[(0,d._)("div",K,[a[1]||(a[1]=(0,d._)("i",{class:"i-fa:envelope-open"},null,-1)),(0,d._)("span",null,(0,d.zw)(e.$t("api.overview.avgOpenRate")),1)]),(0,d._)("div",D,(0,d.zw)((0,d.SU)(l).avg_open_rate)+"%",1)]),_:1}),(0,d.Wm)(t,{class:"flex-1"},{default:(0,d.w5)(()=>[(0,d._)("div",E,[a[2]||(a[2]=(0,d._)("i",{class:"i-fa:mouse-pointer"},null,-1)),(0,d._)("span",null,(0,d.zw)(e.$t("api.overview.avgClickRate")),1)]),(0,d._)("div",F,(0,d.zw)((0,d.SU)(l).avg_click_rate)+"%",1)]),_:1}),(0,d.Wm)(t,{class:"flex-1"},{default:(0,d.w5)(()=>[(0,d._)("div",I,[a[3]||(a[3]=(0,d._)("i",{class:"i-fa:ban"},null,-1)),(0,d._)("span",null,(0,d.zw)(e.$t("api.overview.avgBounceRate")),1)]),(0,d._)("div",N,(0,d.zw)((0,d.SU)(l).avg_bounce_rate)+"%",1)]),_:1})])]),_:1},8,["show"])}}}),A=(0,b.default)(L,[["__scopeId","data-v-da2d6552"]]);var Q=t(35409),V=t(77984);let J={class:"flex"},B={class:"w-0 flex-1 flex items-center"},G={class:"min-w-0"},Y=(0,d.aZ)({__name:"ApiKey",props:{value:{default:""}},setup(e){let{copyText:a}=(0,V.F)(),t=async()=>{a(`${e.value}`)};return(e,a)=>{let l=Q.ZP;return(0,d.wg)(),(0,d.iD)("div",J,[(0,d._)("div",B,[(0,d._)("div",G,[(0,d.Wm)(l,{class:"max-w-full",tooltip:{contentStyle:{maxWidth:"300px"}}},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.value),1)]),_:1})]),(0,d._)("div",{class:"ml-6px text-15px cursor-pointer",title:"Copy",onClick:t},a[0]||(a[0]=[(0,d._)("i",{class:"i-mdi-content-copy"},null,-1)]))])])}}});var X=t(46244),ee=t(81833),ea=t(37864),et=t(29875),el=t(6455),ei=t(31651),en=t(54078),es=t(19664),eu=t(28444),eo=t(65302);let er={class:"flex-1"},ep=(0,d.aZ)({__name:"ApiForm",setup(e){let{t:a}=(0,f.QT)(),t=(0,d.iH)(!1),l=(0,d.Fl)(()=>t.value?a("api.form.title.edit"):a("api.form.title.add")),i=(0,d.AE)("formRef"),n=(0,d.qj)({id:0,api_name:"",template_id:null,template_content:"",subject:"",domain:null,addresser:null,full_name:"",unsubscribe:1,active:1,ip_whitelist:"",track_click:1,track_open:1}),s={api_name:{required:!0,message:a("api.form.validation.apiNameRequired")},addresser:{required:!0,message:a("api.form.validation.addresserRequired")},full_name:{required:!0,message:a("market.task.edit.displayNamePlaceholder")},subject:{required:!0,message:a("market.task.edit.subjectPlaceholder")},template_id:{required:!0,message:a("api.form.validation.templateRequired")}},[u,r]=(0,Z.d)({component:eo.Z}),p=e=>{r.setState({html:e}),r.open()},c=async()=>{let e=await (0,ei.ij)({id:`${n.template_id}`});(0,_.Kn)(e)&&(2==e.add_type&&e.chat_id?window.open(`/template/ai-template/${e.chat_id}`):(v.setState({isEdit:!0,row:e}),v.open()))},[m,v]=(0,Z.d)({component:en.Z,state:{isEdit:!0,refresh:async()=>{let e=await (0,ei.ij)({id:`${n.template_id}`});(0,_.Kn)(e)&&(n.template_content=e.html_content)},preview:e=>{p(e)}}}),g=()=>{n.id=0,n.api_name="",n.template_id=null,n.template_content="",n.subject="",n.addresser=null,n.full_name="",n.unsubscribe=1,n.active=1,n.ip_whitelist="",n.track_click=1,n.track_open=1},w=()=>({api_name:n.api_name,template_id:n.template_id||0,subject:n.subject,addresser:n.addresser||"",full_name:n.full_name,unsubscribe:n.unsubscribe,active:n.active,ip_whitelist:n.ip_whitelist.split(","),track_click:n.track_click,track_open:n.track_open}),[h,k]=(0,Z.d)({onChangeState:e=>{if(e){let e=k.getState(),{row:a}=e;t.value=e.isEdit,a&&(n.id=a.id,n.api_name=a.api_name,n.template_id=a.template_id,n.domain=a.addresser.split("@")[1],n.subject=a.subject,n.addresser=a.addresser,n.full_name=a.full_name,n.unsubscribe=a.unsubscribe,n.active=a.active,n.ip_whitelist=a.ip_whitelist.join(","),n.track_click=a.track_click,n.track_open=a.track_open)}else g()},onConfirm:async()=>{var e;await (null==(e=i.value)?void 0:e.validate());let a=w();t.value?await C({...a,id:n.id}):await T(a),k.getState().refresh()}});return(e,t)=>{let r=o.Z,v=el.ZP,_=U.ZP,f=et.Z,g=ea.ZP,w=ee.Z,k=X.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(h),{title:(0,d.SU)(l),width:"520"},{default:(0,d.w5)(()=>[(0,d.Wm)(k,{ref_key:"formRef",ref:i,model:(0,d.SU)(n),rules:s,class:"pt-12px"},{default:(0,d.w5)(()=>[(0,d.Wm)(v,{label:e.$t("api.form.apiName"),path:"api_name"},{default:(0,d.w5)(()=>[(0,d.Wm)(r,{value:(0,d.SU)(n).api_name,"onUpdate:value":t[0]||(t[0]=e=>(0,d.SU)(n).api_name=e),placeholder:e.$t("api.form.apiNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,d.Wm)(v,{label:e.$t("market.task.edit.from"),path:"addresser"},{default:(0,d.w5)(()=>[(0,d.Wm)(es.Z,{value:(0,d.SU)(n).addresser,"onUpdate:value":t[1]||(t[1]=e=>(0,d.SU)(n).addresser=e),domain:(0,d.SU)(n).domain,"onUpdate:domain":t[2]||(t[2]=e=>(0,d.SU)(n).domain=e),name:(0,d.SU)(n).full_name,"onUpdate:name":t[3]||(t[3]=e=>(0,d.SU)(n).full_name=e)},null,8,["value","domain","name"])]),_:1},8,["label"]),(0,d.Wm)(v,{label:e.$t("market.task.edit.displayName"),path:"full_name"},{default:(0,d.w5)(()=>[(0,d.Wm)(r,{value:(0,d.SU)(n).full_name,"onUpdate:value":t[4]||(t[4]=e=>(0,d.SU)(n).full_name=e),placeholder:e.$t("market.task.edit.displayNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,d.Wm)(v,{label:e.$t("market.task.edit.subject"),path:"subject"},{default:(0,d.w5)(()=>[(0,d.Wm)(r,{value:(0,d.SU)(n).subject,"onUpdate:value":t[5]||(t[5]=e=>(0,d.SU)(n).subject=e),placeholder:e.$t("market.task.edit.subjectPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,d.Wm)(v,{label:e.$t("market.task.edit.template"),path:"template_id"},{default:(0,d.w5)(()=>[(0,d._)("div",er,[(0,d.Wm)(eu.Z,{value:(0,d.SU)(n).template_id,"onUpdate:value":t[6]||(t[6]=e=>(0,d.SU)(n).template_id=e),content:(0,d.SU)(n).template_content,"onUpdate:content":t[7]||(t[7]=e=>(0,d.SU)(n).template_content=e)},null,8,["value","content"])]),(0,d.Wm)(_,{text:"",type:"primary",class:"ml-12px",onClick:c},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("common.actions.edit")),1)]),_:1}),(0,d.Wm)(_,{text:"",type:"primary",class:"ml-12px",onClick:t[8]||(t[8]=e=>p((0,d.SU)(n).template_content))},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("common.actions.preview")),1)]),_:1})]),_:1},8,["label"]),(0,d.Wm)(w,{cols:24,"x-gap":16},{default:(0,d.w5)(()=>[(0,d.Wm)(g,{span:12,label:e.$t("api.form.status")},{default:(0,d.w5)(()=>[(0,d.Wm)(f,{value:(0,d.SU)(n).active,"onUpdate:value":t[9]||(t[9]=e=>(0,d.SU)(n).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,d.Wm)(g,{span:12,label:e.$t("market.task.edit.unsubscribeLink")},{default:(0,d.w5)(()=>[(0,d.Wm)(f,{value:(0,d.SU)(n).unsubscribe,"onUpdate:value":t[10]||(t[10]=e=>(0,d.SU)(n).unsubscribe=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,d.Wm)(g,{span:12,label:(0,d.SU)(a)("market.task.edit.trackClick"),path:"track_click"},{default:(0,d.w5)(()=>[(0,d.Wm)(f,{value:(0,d.SU)(n).track_click,"onUpdate:value":t[11]||(t[11]=e=>(0,d.SU)(n).track_click=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,d.Wm)(g,{span:12,label:(0,d.SU)(a)("market.task.edit.trackOpen"),path:"track_open"},{default:(0,d.w5)(()=>[(0,d.Wm)(f,{value:(0,d.SU)(n).track_open,"onUpdate:value":t[12]||(t[12]=e=>(0,d.SU)(n).track_open=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"])]),_:1}),(0,d.Wm)(v,{label:e.$t("api.form.ipWhitelist")},{default:(0,d.w5)(()=>[(0,d.Wm)(r,{value:(0,d.SU)(n).ip_whitelist,"onUpdate:value":t[13]||(t[13]=e=>(0,d.SU)(n).ip_whitelist=e),placeholder:e.$t("api.form.ipWhitelistPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,d.Wm)((0,d.SU)(m)),(0,d.Wm)((0,d.SU)(u))]),_:1},8,["model"])]),_:1},8,["title"])}}});var ed=t(26281),ec=t(41982);t(94812),t(59076);let em={class:"flex items-center gap-16px w-full"},ev=["innerHTML"],e_=(0,d.aZ)({__name:"index",props:{code:{type:String,default:""},language:{type:String,default:"shell"}},setup(e){let a=(0,d.Fl)(()=>`\`\`\`${e.language}
${e.code}
\`\`\``),t=(0,d.Fl)(()=>ed.TU.parse(a.value)),{copyText:l}=(0,V.F)(),i=()=>{l(e.code)};return ed.TU.use({extensions:[{name:"highlight",level:"block",start(e){var a;return null==(a=e.match(/^```/))?void 0:a.index},tokenizer(e){let a=/^```([^\n]*?)\n([\s\S]*?)\n```/.exec(e);if(a)return{type:"highlight",raw:a[0],lang:a[1].trim(),code:a[2]}},renderer(e){let{lang:a,code:t}=e;if(a&&ec.Z.getLanguage(a)){let e=ec.Z.highlight(t,{language:a}).value;return`<pre><code class="hljs language-${a}">${e}</code></pre>`}return`<pre><code>${t}</code></pre>`}}]}),(e,a)=>{let l=U.ZP;return(0,d.wg)(),(0,d.iD)("div",em,[(0,d._)("div",{class:"markdown-body flex-1 w-0",innerHTML:(0,d.SU)(t)},null,8,ev),(0,d.Wm)(l,{onClick:i},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("common.actions.copy")),1)]),_:1})])}}}),ef={class:"flex-1 mr-10px"},eg=(0,d.aZ)({__name:"ApiTest",setup(e){let{t:a}=(0,f.QT)(),t=(0,d.iH)(""),l=(0,d.Fl)(()=>t.value.replaceAll("$email",i.recipient)),i=(0,d.qj)({recipient:""}),n={recipient:{required:!0,message:a("market.task.edit.testEmailPlaceholder")}},s=()=>{i.recipient=""},[u,r]=(0,Z.d)({onChangeState:e=>{if(e){let{row:e}=r.getState();e&&(t.value=`curl -k -X POST '${e.server_addresser}' \\
-H 'X-API-Key: ${e.api_key}' \\
-H 'Content-Type: application/json' \\
-d '{
	"recipient": "$email"
}'`)}else s()}});return(e,a)=>{let t=o.Z,s=el.ZP,r=X.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(u),{title:"Test API",width:"720",footer:!1},{default:(0,d.w5)(()=>[(0,d.Wm)(r,{ref:"formRef",model:(0,d.SU)(i),rules:n,class:"pt-12px"},{default:(0,d.w5)(()=>[(0,d.Wm)(s,{label:e.$t("market.task.edit.testEmail"),path:"recipient"},{default:(0,d.w5)(()=>[(0,d._)("div",ef,[(0,d.Wm)(t,{value:(0,d.SU)(i).recipient,"onUpdate:value":a[0]||(a[0]=e=>(0,d.SU)(i).recipient=e),placeholder:e.$t("market.task.edit.testEmailPlaceholder")},null,8,["value","placeholder"])])]),_:1},8,["label"]),(0,d.Wm)(s,{label:"Command"},{default:(0,d.w5)(()=>[(0,d.Wm)(e_,{code:(0,d.SU)(l),language:"bash"},null,8,["code"])]),_:1})]),_:1},8,["model"])]),_:1})}}}),ew={class:"p-24px"},eh={class:"bt-title"},ek={class:"flex flex-wrap items-center gap-16px"},eb={class:"flex items-center whitespace-pre"},ey={class:"text-default"},eU={class:"flex items-center whitespace-pre"},eS={class:"text-default"},ex={class:"w-120px"},eW={class:"flex items-center whitespace-pre"},eZ={class:"text-default"},e$={class:"w-200px"},ez={class:"flex gap-8px"};function eP(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,d.lA)(e)}let ej=(0,d.aZ)({__name:"index",setup(e){let{t:a}=(0,f.QT)(),t=(0,d.AE)("overviewRef"),p=[{label:a("api.statusOptions.all"),value:-1},{label:a("api.statusOptions.active"),value:1},{label:a("api.statusOptions.inactive"),value:0}],c=(0,d.iH)([{key:"api_name",title:a("api.columns.apiName"),maxWidth:120,render:e=>(0,d.Wm)(U.ZP,{type:"primary",text:!0,onClick:()=>{z(e)}},{default:()=>[e.api_name]})},{key:"api_key",title:a("api.columns.apiKey"),width:"28%",maxWidth:160,render:e=>(0,d.Wm)(Y,{class:"w-94%",value:e.api_key},null)},{key:"send_count",title:a("api.columns.sendCount"),width:"9%",maxWidth:100},{key:"open_rate",title:a("api.columns.openRate"),width:"9%",maxWidth:100,render:e=>`${e.open_rate}%`},{key:"click_rate",title:a("api.columns.clickRate"),width:"9%",maxWidth:100,render:e=>`${e.click_rate}%`},{key:"bounce_rate",title:a("api.columns.bounceRate"),width:"9%",maxWidth:100,render:e=>`${e.bounce_rate}%`},{key:"active",title:a("api.columns.status"),width:"8%",maxWidth:80,render:e=>(0,d.Wm)(S.ZP,{size:"small",type:e.active?"primary":"warning",bordered:!1},{default:()=>[e.active?a("api.statusLabels.active"):a("api.statusLabels.inactive")]})},{title:a("common.columns.actions"),key:"actions",align:"right",width:160,render:e=>{let t,l,i;return(0,d.Wm)(x.Z,{inline:!0},{default:()=>[(0,d.Wm)(U.ZP,{type:"primary",text:!0,onClick:()=>{C(e)}},eP(t=a("common.actions.test"))?t:{default:()=>[t]}),(0,d.Wm)(U.ZP,{type:"primary",text:!0,onClick:()=>{z(e)}},eP(l=a("common.actions.edit"))?l:{default:()=>[l]}),(0,d.Wm)(U.ZP,{type:"error",text:!0,onClick:()=>{H(e)}},eP(i=a("common.actions.delete"))?i:{default:()=>[i]})]})}}]),{tableParams:m,tableProps:v,pageProps:g,fetchTable:w}=(0,W.N)({params:{page:1,page_size:10,keyword:"",active:-1,time_range:[0,0]},immediate:!1,fetchFn:P,useParams:e=>({page:e.page,page_size:e.page_size,keyword:e.keyword,active:e.active,start_time:Math.floor(e.time_range[0]/1e3),end_time:Math.floor(e.time_range[1]/1e3)})}),h=async()=>{var e;null==(e=t.value)||e.getStats(),w()},[k,b]=(0,Z.d)({component:ep,state:{isEdit:!1,refresh:w}}),$=()=>{b.setState({row:null,isEdit:!1}),b.open()},z=e=>{b.setState({row:e,isEdit:!0}),b.open()},[j,T]=(0,Z.d)({component:eg,state:{row:null}}),C=e=>{T.setState({row:e}),T.open()},H=e=>{(0,_.iG)({title:a("api.confirmDelete.title",{apiName:e.api_name}),content:a("api.confirmDelete.content"),onConfirm:async()=>{await R({id:e.id}),w()}})};return(0,d.bv)(()=>{w()}),(e,a)=>{let _=r.Z,f=o.Z,b=u.ZP,S=s.Z,x=n.Z,W=i.Z,Z=l.Z;return(0,d.wg)(),(0,d.iD)("div",ew,[(0,d._)("div",eh,(0,d.zw)(e.$t("api.title")),1),(0,d.Wm)(b,{class:"mb-24px","content-style":{padding:"16px 24px"}},{default:(0,d.w5)(()=>[(0,d._)("div",ek,[(0,d._)("div",eb,[(0,d._)("span",ey,(0,d.zw)(e.$t("api.timeRange")),1),(0,d.Wm)(y,{value:(0,d.SU)(m).time_range,"onUpdate:value":a[0]||(a[0]=e=>(0,d.SU)(m).time_range=e),"default-type":"last7days",onChange:h},null,8,["value"])]),(0,d._)("div",eU,[(0,d._)("span",eS,(0,d.zw)(e.$t("api.status")),1),(0,d._)("div",ex,[(0,d.Wm)(_,{value:(0,d.SU)(m).active,"onUpdate:value":[a[1]||(a[1]=e=>(0,d.SU)(m).active=e),a[2]||(a[2]=()=>(0,d.SU)(w)(!0))],options:p},null,8,["value"])])]),(0,d._)("div",eW,[(0,d._)("span",eZ,(0,d.zw)(e.$t("api.search")),1),(0,d._)("div",e$,[(0,d.Wm)(f,{value:(0,d.SU)(m).keyword,"onUpdate:value":a[3]||(a[3]=e=>(0,d.SU)(m).keyword=e),placeholder:e.$t("api.searchPlaceholder"),onKeyup:a[4]||(a[4]=(0,d.D2)(()=>(0,d.SU)(w)(!0),["enter"]))},null,8,["value","placeholder"])])]),(0,d._)("div",ez,[(0,d.Wm)((0,d.SU)(U.ZP),{type:"primary",ghost:"",onClick:a[5]||(a[5]=()=>(0,d.SU)(w)())},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("common.actions.search")),1)]),_:1}),(0,d.Wm)((0,d.SU)(U.ZP),{type:"primary",ghost:"",onClick:h},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("api.refreshData")),1)]),_:1})])])]),_:1}),(0,d.Wm)(A,{ref_key:"overviewRef",ref:t,time:(0,d.SU)(m).time_range},null,8,["time"]),(0,d.Wm)(Z,null,{toolsLeft:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(U.ZP),{type:"primary",onClick:$},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("api.createNew")),1)]),_:1}),(0,d.Wm)(S,{href:"https://www.billionmail.com/start/api_mail_guide.html",text:e.$t("common.actions.help")},null,8,["text"])]),table:(0,d.w5)(()=>[(0,d.Wm)(x,(0,d.dG)((0,d.SU)(v),{columns:(0,d.SU)(c)}),null,16,["columns"])]),pageRight:(0,d.w5)(()=>[(0,d.Wm)(W,(0,d.dG)((0,d.SU)(g),{onRefresh:(0,d.SU)(w)}),null,16,["onRefresh"])]),modal:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(k)),(0,d.Wm)((0,d.SU)(j))]),_:1})])}}})},19664:function(e,a,t){t.d(a,{Z:()=>p});var l=t(8490),i=t(58786),n=t(68271),s=t(39432),u=t(67127);let o={class:"flex-1"},r={class:"flex-1 ml-10px"},p=(0,i.aZ)({__name:"FromSelect",props:{value:{},valueModifiers:{},name:{},nameModifiers:{},domain:{},domainModifiers:{}},emits:["update:value","update:name","update:domain"],setup(e){let a=(0,i.tT)(e,"value"),t=(0,i.tT)(e,"name"),p=(0,i.iH)(!1),d=(0,i.tT)(e,"domain"),c=(0,i.iH)([]),m=(0,i.iH)([]),v=(0,i.Fl)(()=>m.value.filter(e=>e.domain===d.value).map(e=>({label:e.username,value:e.username,data:e}))),_=async()=>{await (0,i.Y3)(),v.value.length>0?(a.value=v.value[0].value,f(a.value,v.value[0])):(a.value=null,t.value="")},f=(e,a)=>{let{data:l}=a;(0,n.Kn)(l)&&(t.value=l.full_name)},g=async()=>{let e=await (0,s.LC)();if((0,n.kJ)(e)&&(c.value=e.map(e=>({label:e.domain,value:e.domain})),!d.value&&e.length>0)){let a=e.filter(e=>e.default);a.length>0?d.value=a[0].domain:d.value=e[0].domain}},w=async()=>{let e=await (0,u.iC)({page:1,page_size:1e3,domain:""});(0,n.Kn)(e)&&(m.value=e.list)};return(async()=>{try{p.value=!0,await w(),await g(),await (0,i.Y3)(),null===a.value?_():a.value&&(d.value=a.value.split("@")[1])}finally{p.value=!1}})(),(e,t)=>{let n=l.Z;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",o,[(0,i.Wm)(n,{value:d.value,"onUpdate:value":[t[0]||(t[0]=e=>d.value=e),_],loading:(0,i.SU)(p),options:(0,i.SU)(c)},null,8,["value","loading","options"])]),(0,i._)("div",r,[(0,i.Wm)(n,{value:a.value,"onUpdate:value":[t[1]||(t[1]=e=>a.value=e),f],loading:(0,i.SU)(p),options:(0,i.SU)(v),filterable:!0},null,8,["value","loading","options"])])],64)}}})},28444:function(e,a,t){t.d(a,{Z:()=>u});var l=t(8490),i=t(58786),n=t(68271),s=t(31651);let u=(0,i.aZ)({__name:"TemplateSelect",props:{value:{},valueModifiers:{},content:{},contentModifiers:{}},emits:(0,i.Vf)(["listReady"],["update:value","update:content"]),setup(e,a){let{emit:t}=a,u=(0,i.tT)(e,"value"),o=(0,i.tT)(e,"content"),r=(0,i.iH)(!1),p=(0,i.iH)([]),d=(e,a)=>{let{data:t}=a;(0,n.Kn)(t)&&(o.value=t.html_content)};return(async()=>{try{r.value=!0;let e=await (0,s.NI)();if((0,n.kJ)(e)){if(p.value=e.map(e=>({label:e.temp_name,value:e.id,data:e})),null===u.value)u.value=e[0].id,o.value=e[0].html_content;else{let a=e.find(e=>e.id===u.value);a&&(o.value=a.html_content)}t("listReady",e)}}finally{r.value=!1}})(),(e,a)=>{let t=l.Z;return(0,i.wg)(),(0,i.j4)(t,{value:u.value,"onUpdate:value":[a[0]||(a[0]=e=>u.value=e),d],loading:(0,i.SU)(r),filterable:!0,options:(0,i.SU)(p)},null,8,["value","loading","options"])}}})},65302:function(e,a,t){t.d(a,{Z:()=>s});var l=t(53472),i=t(58786),n=t(51169);let s=(0,i.aZ)({__name:"TemplatePreview",setup(e){let a=(0,i.iH)(""),[t,s]=(0,n.d)({onChangeState:e=>{e&&(a.value=s.getState().html||"")}});return(e,n)=>{let s=l.Z;return(0,i.wg)(),(0,i.j4)((0,i.SU)(t),{title:e.$t("market.template.preview.title"),width:"820",footer:!1},{default:(0,i.w5)(()=>[(0,i.Wm)(s,{height:580,value:(0,i.SU)(a)},null,8,["value"])]),_:1},8,["title"])}}})}}]);