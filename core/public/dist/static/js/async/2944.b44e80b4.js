"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["2944"],{39432:function(e,t,a){a.d(t,{Aj:()=>w,Au:()=>p,Fj:()=>u,LC:()=>o,Lb:()=>h,M7:()=>_,OV:()=>d,dj:()=>c,gK:()=>r,i7:()=>n,nf:()=>y,qt:()=>s,rU:()=>v,v1:()=>m,xh:()=>g,yW:()=>f});var i=a(34541);let{t:l}=a(76882).ZP.global,n=e=>i.e.get("/domains/list",{params:e}),o=()=>i.e.get("/domains/all"),s=()=>i.e.post("/multi_ip_domain/apply"),u=e=>i.e.post("/domains/create",e,{fetchOptions:{loading:l("domain.api.loading.creating"),successMessage:!0}}),r=e=>i.e.post("/domains/update",e,{fetchOptions:{loading:l("domain.api.loading.updating"),successMessage:!0}}),c=e=>i.e.post("/domains/delete",e,{fetchOptions:{loading:l("domain.api.loading.deleting"),successMessage:!0}}),d=e=>i.e.post("/domains/set_ssl",e,{fetchOptions:{loading:l("domain.api.loading.settingSSL"),successMessage:!0}}),p=e=>i.e.get("/domains/get_ssl",{params:e}),m=e=>i.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:l("domain.api.loading.refreshingDns"),successMessage:!0}}),f=e=>i.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:l("domain.api.loading.applyingCert"),successMessage:!0}}),g=e=>i.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:l("domain.api.loading.settingDefault"),successMessage:!0}}),v=e=>i.e.post("/askai/project/create",e,{fetchOptions:{loading:l("domain.api.loading.settingBrandInfo"),successMessage:!0}}),_=e=>i.e.post("/multi_ip_domain/test",e,{fetchOptions:{loading:l("domain.api.loading.testingConnection"),successMessage:!0}}),h=()=>i.e.post("/askai/supplier/status"),y=e=>i.e.post("/domain_blocklist/check",e,{fetchOptions:{loading:l("domain.api.loading.detecting"),successMessage:!0}}),w=e=>i.e.get("/domain_blocklist/logs",{params:e})},31651:function(e,t,a){a.d(t,{A8:()=>o,NI:()=>s,QB:()=>c,WF:()=>r,Xc:()=>p,ef:()=>d,ij:()=>u});var i=a(76882),l=a(34541);let{t:n}=i.ZP.global;function o(e){return l.e.get("/email_template/list",{params:e})}function s(){return l.e.get("/email_template/all")}function u(e){return l.e.get("/email_template/get",{params:e})}function r(e){return l.e.post("/email_template/create",e,{fetchOptions:{loading:n("market.template.loading.creating"),successMessage:!0}})}function c(e){return l.e.post("/email_template/update",e,{fetchOptions:{loading:n("market.template.loading.updating"),successMessage:!0}})}function d(e){return l.e.post("/email_template/copy",e,{fetchOptions:{loading:n("market.template.loading.copying"),successMessage:!0}})}function p(e){return l.e.post("/email_template/delete",e,{fetchOptions:{loading:n("market.template.loading.deleting"),successMessage:!0}})}},16634:function(e,t,a){a.d(t,{Ao:()=>o,mL:()=>s,uL:()=>n});var i=a(34541),l=a(42205);let n={fetchOptions:{loading:"Loading... Please wait.",successMessage:!0}};async function o(e){let{legal_company_name:t,web_site:a,company_profile:n,email:o,phone:s,support_url:u,hasGotCompanyProfile:r}=(0,l.J)();if(!r.value)try{let l=await i.e.post("/askai/project/get_company_profile",{domain:e});t.value=l.legal_company_name,a.value=l.web_site,n.value=l.company_profile,o.value=l.email,s.value=l.phone,u.value=l.support_url,r.value=!0}catch(e){console.warn(e)}}async function s(e){let{legal_company_name:t,web_site:a,company_profile:o,email:s,phone:u,support_url:r}=(0,l.J)();try{await i.e.post("/askai/project/modify_company_profile",{domain:e,legal_company_name:t.value,web_site:a.value,company_profile:o.value,email:s.value,phone:u.value,support_url:r.value},n)}catch(e){console.warn(e)}}},54686:function(e,t,a){a.d(t,{L7:()=>v,M7:()=>p,Rw:()=>_,VP:()=>h,Vq:()=>y,Xe:()=>f,gK:()=>m,ke:()=>g,lQ:()=>c});var i=a(34541),l=a(16634),n=a(42205),o=a(68271),s=a(39432),u=a(31708),r=a(76882);async function c(e){let{domainTit:t,domainIp:a,hostname:l,quota:s,unit:u,mailboxes:r,catch_email:c,hasGotDomainConfiguration:p,urls:m}=(0,n.J)();if(!p.value)try{let n=await i.e.get("/domains/list",{params:{keyword:e,page:1,page_size:1}});if((0,o.Kn)(n)){var f;let{list:i}=n,g=(0,o.UO)(i[0].quota,!0,2).split(" ");t.value=i[0].domain,a.value=(null==(f=i[0].multi_ip_domains)?void 0:f.outbound_ip)||"",l.value=i[0].a_record,s.value=g[0],u.value=g[1],r.value=i[0].mailboxes,c.value=i[0].email,m.value=i[0].urls&&i[0].urls.length>0&&""!=i[0].urls[0]?i[0].urls:[`https://${e}`],await d(e),p.value=!0}}catch(e){console.warn(e)}}async function d(e){let{brandInfo:t,createdBrandInfo:a}=(0,n.J)();try{let l=await i.e.post("/askai/project/get_project_status",{domain:e});t.value=l.status,a.value=l.create_status}catch(e){console.warn(e)}}async function p(){let{domainTit:e,domainIp:t}=(0,n.J)();if(""==t.value)return void o.v0.error(r.ZP.global.t("domain.edit.domainConfiguration.validation.setDedicatedIpFirst"));try{await i.e.post("/multi_ip_domain/test",{domain:e.value,outbound_ip:t.value},{fetchOptions:{loading:r.ZP.global.t("domain.edit.domainConfiguration.api.testingConnection"),successMessage:!0}})}catch(e){console.warn(e)}}async function m(){let{domainTit:e,domainIp:t,hostname:a,quota:o,unit:s,urls:u,mailboxes:r,catch_email:c}=(0,n.J)(),d=function(e,t){switch(t){case"KB":return 1024*e;case"MB":return 1024*e*1024;case"GB":return 1024*e*1048576;case"TB":return 1024*e*0x40000000;default:return e}}(Number(o.value),s.value);try{await i.e.post("/domains/update",{domain:e.value,mailboxes:r.value,mailboxQuota:d,quota:d,rateLimit:1,active:1,email:c.value,urls:u.value,outbound_ip:t.value,hostname:a.value},l.uL)}catch(e){console.warn(e)}}async function f(){let{waitAndCheckDomainStatusRef:e,domainTit:t,urls:a,hasGotDomainConfiguration:i}=(0,n.J)(),l=(0,u.s6)();if(i.value=!1,0==a.value.length||""==a.value[0])o.v0.error(r.ZP.global.t("domain.edit.domainConfiguration.fillDomain"));else if((0,o.CB)(a.value[0]))try{await (0,s.rU)({domain:t.value,urls:a.value}),l.domainSource=t.value,e.value.open(t.value,()=>{g(t.value,1),c(t.value)})}catch(e){console.warn(e)}else o.v0.error(r.ZP.global.t("domain.edit.domainConfiguration.fillValidDomain"))}async function g(e,t){try{await i.e.post("/domains/update",{domain:e,hasbrandinfo:t})}catch(e){console.warn(e)}}function v(e){let{urls:t}=(0,n.J)(),a=t.value[0].match(/http:\/\/?/g),i=t.value[0].match(/https:\/\/?/g);a&&(t.value[0]=a[0]+e),i&&(t.value[0]=i[0]+e),a||i||(t.value[0]="https://"+e)}function _(e){let{urls:t}=(0,n.J)();t.value.splice(e,1)}function h(){let{hasGotAisettings:e,hasGotCompanyProfile:t,hasGotDomainConfiguration:a,hasGotFootersettings:i,hasGotProjectDetail:l,hasGotSitemap:o,hasGotStyling:s}=(0,n.J)();e.value=!1,t.value=!1,a.value=!1,i.value=!1,l.value=!1,o.value=!1,s.value=!1}async function y(e){let{brandInfo:t,domainTit:a}=(0,n.J)();try{await i.e.post("/askai/project/set_project_status",{domain:a.value,status:e},l.uL),await i.e.post("/domains/update",{domain:a.value,active:1,hasbrandinfo:Number(e)})}catch(a){t.value=!e,console.warn(a)}}},42205:function(e,t,a){a.d(t,{J:()=>o});var i=a(30989),l=a(58786);let n=(0,i.Q_)("editDomainStore",()=>{let e=(0,l.iH)(!1),t=(0,l.iH)(""),a=(0,l.iH)(""),i=(0,l.iH)(""),n=(0,l.iH)("0"),o=(0,l.iH)("B"),s=(0,l.iH)(0),u=(0,l.iH)(""),r=(0,l.iH)(["https://"]),c=(0,l.iH)(!1),d=(0,l.iH)(),p=(0,l.iH)(!1),m=(0,l.iH)(!1),f=(0,l.iH)(""),g=(0,l.iH)(""),v=(0,l.iH)(""),_=(0,l.iH)(""),h=(0,l.iH)(""),y=(0,l.iH)(""),w=(0,l.iH)(""),k=(0,l.iH)([]),H=(0,l.iH)({title:"",content:"",kid:"",update_time:0}),x=(0,l.iH)(""),b=(0,l.iH)(""),S=(0,l.iH)(!1),Z=(0,l.iH)(!1),W=(0,l.iH)(""),U=(0,l.iH)(!1),C=(0,l.iH)(""),M=(0,l.iH)(!1),P=(0,l.iH)(""),O=(0,l.iH)(""),j=(0,l.iH)(""),J=(0,l.iH)(""),z=(0,l.iH)(""),L=(0,l.iH)(""),B=(0,l.iH)(!1),D=(0,l.iH)(""),E=(0,l.iH)(""),T=(0,l.iH)(""),A=(0,l.iH)(""),R=(0,l.iH)(""),Q=(0,l.iH)(""),V=(0,l.iH)(""),I=(0,l.iH)(""),K=(0,l.iH)(!1),N=(0,l.iH)([{title:"",uri_path:""}]),q=(0,l.iH)(!1),F=(0,l.iH)(""),G=(0,l.iH)("");return{hasGotDomainConfiguration:e,domainTit:t,domainIp:a,hostname:i,quota:n,unit:o,mailboxes:s,catch_email:u,urls:r,brandInfo:c,waitAndCheckDomainStatusRef:d,createdBrandInfo:p,hasGotProjectDetail:m,domain:f,description:g,favicon:v,industry:_,primary_logo:h,project_name:y,secondary_logo:w,knowledge_base:k,activeKnowledge:H,knowledgeTitle:x,knowledgeContent:b,knowledgeModalShow:S,isEditKnowledge:Z,knowledge_base_content:W,knowledgeBasePreview:U,knowledgeBasePreviewTit:C,hasGotCompanyProfile:M,legal_company_name:P,web_site:O,company_profile:j,email:J,phone:z,support_url:L,hasGotStyling:B,accent_color:D,text_color:E,page_background:T,container_background:A,link_social_color:R,link_footer_color:Q,heading_font:V,body_font:I,hasGotSitemap:K,sitemap:N,hasGotFootersettings:q,copyright_text:F,disclaimer:G,hasGotAisettings:(0,l.iH)(!1),prompt:(0,l.iH)("")}});function o(){let e=n();return{...(0,i.Jk)(e)}}},53472:function(e,t,a){a.d(t,{Z:()=>n});var i=a(58786);let l=["height","srcdoc"],n=(0,i.aZ)({__name:"index",props:{value:{type:String,default:""},height:{type:[String,Number],default:"100%"}},setup:e=>(t,a)=>((0,i.wg)(),(0,i.iD)("iframe",{width:"100%",height:e.height,srcdoc:e.value,style:{border:"none",borderRadius:"4px"}},null,8,l))})},86559:function(e,t,a){a.d(t,{Z:()=>n});var i=a(73084),l=a(58786);let n=(0,l.aZ)({__name:"index",props:(0,l.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,l.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:n}=t,o=(0,l.iH)(null),s=(0,l.tT)(e,"value"),u=()=>{n("search",s.value)};return a({focus:()=>{var e;null==(e=o.value)||e.focus()}}),(e,t)=>{let a=i.Z;return(0,l.wg)(),(0,l.j4)(a,(0,l.dG)({ref_key:"inputRef",ref:o,value:s.value,"onUpdate:value":t[0]||(t[0]=e=>s.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,l.D2)(u,["enter"])}),(0,l.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,l.w5)(()=>[(0,l._)("div",{class:"flex items-center cursor-pointer",onClick:u},t[1]||(t[1]=[(0,l._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,l.w5)(()=>[(0,l._)("div",{class:"flex items-center cursor-pointer",onClick:u},t[2]||(t[2]=[(0,l._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},64994:function(e,t,a){a.r(t),a.d(t,{default:()=>W});var i=a(39244),l=a(25170),n=a(60424),o=a(66760),s=a(86559),u=a(15496),r=a(73084),c=a(58786),d=a(53903),p=a(93953),m=a(51169),f=a(67512),g=a(68271),v=a(31651),_=a(54078),h=a(53472);let y=(0,c.aZ)({__name:"TemplatePreview",setup(e){let t=(0,c.iH)(""),[a,i]=(0,m.d)({onChangeState:e=>{e&&(t.value=i.getState().html||"")}});return(e,i)=>{let l=h.Z;return(0,c.wg)(),(0,c.j4)((0,c.SU)(a),{title:e.$t("market.template.preview.title"),width:"820",footer:!1},{default:(0,c.w5)(()=>[(0,c.Wm)(l,{height:580,value:(0,c.SU)(t)},null,8,["value"])]),_:1},8,["title"])}}});var w=a(86720),k=a(65965),H=a(52495);let x={class:"p-24px"},b={class:"bt-title"};function S(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,c.lA)(e)}let Z=(0,c.aZ)({__name:"index",setup(e){let t=(0,k.tv)(),{t:a}=(0,H.QT)(),h=(0,c.iH)(),{tableParams:Z,tableList:W,loading:U,tableTotal:C,getTableData:M}=(0,f.Z)({loading:!0,immediate:!1,params:{page:1,page_size:10,keyword:""},fetchFn:v.A8});(async()=>{await M(),W.value.forEach(e=>{e.isEdit=!1,e.edit_name=""})})();let P=(0,c.iH)([{key:"temp_name",title:a("market.template.columns.name"),minWidth:120,ellipsis:{tooltip:!0},render:e=>{if(!e.isEdit)return(0,c.Wm)("div",{class:"flex justify-start gap-1.25 items-center"},[(0,c.Wm)(u.ZP,{type:"primary",text:!0,onClick:()=>{B(e)}},{default:()=>[e.temp_name]}),(0,c.Wm)("i",{class:"i-ci:edit-pencil-line-01 text-14px cursor-pointer",onClick:()=>{e.isEdit=!0,e.edit_name=e.temp_name}},null)]);{let t,i;return(0,c.Wm)("div",{class:"flex justify-start gap-1.25 items-center"},[(0,c.Wm)(r.Z,{class:"edit-domain-input",value:e.edit_name,"onUpdate:value":t=>e.edit_name=t},null),(0,c.Wm)(u.ZP,{text:!0,type:"info",class:"text-12px",onClick:()=>L(e)},S(t=a("market.template.edit.confirm"))?t:{default:()=>[t]}),(0,c.Wm)(u.ZP,{text:!0,type:"default",onClick:()=>{e.isEdit=!1,e.edit_name=""}},S(i=a("market.template.edit.cancel"))?i:{default:()=>[i]})])}}},{key:"add_type",title:a("market.template.columns.type"),minWidth:140,render:e=>{if(1===e.add_type){let e;return(0,c.Wm)(d.ZP,{size:"small",bordered:!1,type:"primary"},S(e=a("market.template.types.drag"))?e:{default:()=>[e]})}if(0===e.add_type){let e;return(0,c.Wm)(d.ZP,{size:"small",bordered:!1,type:"info"},S(e=a("market.template.types.html"))?e:{default:()=>[e]})}if(2==e.add_type){let e;return(0,c.Wm)(d.ZP,{size:"small",bordered:!1,type:"success"},S(e=a("market.template.types.ai"))?e:{default:()=>[e]})}}},{key:"create_time",title:a("market.template.columns.createdAt"),minWidth:140,render:e=>(0,g.mr)(e.create_time)},{title:a("common.columns.actions"),key:"actions",align:"right",width:240,render:e=>{let t,i,l,n;return(0,c.Wm)(p.Z,{inline:!0},{default:()=>[(0,c.Wm)(u.ZP,{type:"primary",text:!0,onClick:()=>{T(e.html_content)}},S(t=a("common.actions.preview"))?t:{default:()=>[t]}),(0,c.Wm)(u.ZP,{type:"primary",text:!0,onClick:()=>{B(e)}},S(i=a("common.actions.edit"))?i:{default:()=>[i]}),(0,c.Wm)(u.ZP,{type:"primary",text:!0,disabled:2==e.add_type,onClick:()=>{A(e)}},S(l=a("market.template.actions.duplicate"))?l:{default:()=>[l]}),(0,c.Wm)(u.ZP,{type:"error",text:!0,onClick:()=>{R(e)}},S(n=a("common.actions.delete"))?n:{default:()=>[n]})]})}}]),[O,j]=(0,m.d)({component:_.Z,state:{isEdit:!1,refresh:M,preview:e=>{T(e)}}}),J=()=>{h.value.open()},z=e=>{"Drag"==e?j.setState({isEdit:!1,type:1,row:null}):"HTML"==e&&j.setState({isEdit:!1,type:0,row:null}),j.open()},L=async e=>{e.temp_name=e.edit_name,await (0,v.QB)(e),e.isEdit=!1},B=e=>{2==e.add_type&&e.chat_id?t.push({name:"ai-template",params:{chatId:e.chat_id}}):(j.setState({isEdit:!0,row:e}),j.open())},[D,E]=(0,m.d)({component:y}),T=e=>{E.setState({html:e}),E.open()},A=async e=>{await (0,v.ef)({id:e.id}),M()},R=e=>{(0,g.iG)({title:a("market.template.delete.title"),content:a("market.template.delete.confirm",{name:e.temp_name}),confirmText:a("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,v.Xc)({id:e.id}),M()}})};return(e,t)=>{let r=s.Z,d=o.Z,p=n.Z,m=l.Z,f=i.Z;return(0,c.wg)(),(0,c.iD)(c.HY,null,[(0,c._)("div",x,[(0,c._)("div",b,(0,c.zw)((0,c.SU)(a)("template.template")),1),(0,c.Wm)(f,null,{toolsLeft:(0,c.w5)(()=>[(0,c.Wm)((0,c.SU)(u.ZP),{type:"primary",onClick:J},{default:(0,c.w5)(()=>[(0,c.Uk)((0,c.zw)((0,c.SU)(a)("market.template.actions.add")),1)]),_:1})]),toolsRight:(0,c.w5)(()=>[(0,c.Wm)(r,{value:(0,c.SU)(Z).keyword,"onUpdate:value":t[0]||(t[0]=e=>(0,c.SU)(Z).keyword=e),width:240,placeholder:(0,c.SU)(a)("market.template.search.namePlaceholder"),onSearch:t[1]||(t[1]=()=>(0,c.SU)(M)(!0))},null,8,["value","placeholder"])]),table:(0,c.w5)(()=>[(0,c.Wm)(p,{loading:(0,c.SU)(U),columns:(0,c.SU)(P),data:(0,c.SU)(W)},{empty:(0,c.w5)(()=>[(0,c.Wm)(d)]),_:1},8,["loading","columns","data"])]),pageRight:(0,c.w5)(()=>[(0,c.Wm)(m,{page:(0,c.SU)(Z).page,"onUpdate:page":t[2]||(t[2]=e=>(0,c.SU)(Z).page=e),"page-size":(0,c.SU)(Z).page_size,"onUpdate:pageSize":t[3]||(t[3]=e=>(0,c.SU)(Z).page_size=e),"item-count":(0,c.SU)(C),onRefresh:(0,c.SU)(M)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,c.w5)(()=>[(0,c.Wm)((0,c.SU)(O)),(0,c.Wm)((0,c.SU)(D))]),_:1})]),(0,c.Wm)(w.Z,{ref_key:"createTemplateModalRef",ref:h,onConfirmType:z},null,512)],64)}}}),W=(0,a(41748).default)(Z,[["__scopeId","data-v-0e970b7e"]])}}]);