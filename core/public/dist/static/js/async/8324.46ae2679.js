"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["8324"],{47328:function(e,t,a){a.d(t,{Z:()=>o});var l=a(60579),n=a(58786),d=a(6768);let u=(0,n.aZ)({__name:"index",props:(0,n.Vf)({language:{type:String,default:"html"},theme:{type:String,default:"vs-dark"},options:{type:Object,default:()=>({})}},{value:{default:""},valueModifiers:{}}),emits:(0,n.Vf)(["save"],["update:value"]),setup(e,t){let{expose:a,emit:u}=t,o=(0,n.tT)(e,"value"),i=(0,n.iH)(null),m=null,p=(0,n.iH)(!1),r=async()=>{if(i.value&&!m)try{p.value=!0;let t=await d.Z.init();(m=t.editor.create(i.value,{value:o.value,language:e.language,theme:e.theme,minimap:{enabled:!1},automaticLayout:!0,scrollBeyondLastLine:!1,fontSize:14,tabSize:2,wordWrap:"on",...e.options})).onDidChangeModelContent(()=>{o.value=(null==m?void 0:m.getValue())||""}),m.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyS,function(){u("save")})}finally{p.value=!1}},s=()=>{m&&(m.dispose(),m=null)};return(0,n.YP)(()=>o.value,e=>{m&&e!==m.getValue()&&m.setValue(e)}),(0,n.bv)(()=>{r()}),(0,n.Jd)(()=>{s()}),a({getEditor:()=>m}),(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,{class:"h-full",show:(0,n.SU)(p)},{default:(0,n.w5)(()=>[(0,n._)("div",{ref_key:"containerRef",ref:i,class:"monaco-editor-container"},null,512)]),_:1},8,["show"])}}}),o=(0,a(41748).default)(u,[["__scopeId","data-v-3c7da4e6"]])},54078:function(e,t,a){a.d(t,{Z:()=>g});var l=a(46244),n=a(6455),d=a(47328),u=a(15496),o=a(3179),i=a(81833),m=a(8490),p=a(37864),r=a(73084),s=a(58786),_=a(51169),v=a(31651);let c={class:"flex flex-col flex-1 h-580px"},f={class:"flex justify-end gap-12px mb-8px"},h={class:"flex-1"},g=(0,s.aZ)({__name:"TemplateForm",setup(e){let t=(0,s.RC)(()=>Promise.all([a.e("9780"),a.e("7303"),a.e("5867"),a.e("3697"),a.e("9380")]).then(a.bind(a,48555))),g=(0,s.iH)(!1),y=(0,s.Fl)(()=>g.value?"Edit template":"New template"),w=(0,s.iH)(0),S=(0,s.qj)({temp_name:"",add_type:0,html_content:"",drag_data:""}),U=[{label:"HTML",value:0},{label:"Drag",value:1}],b=(0,s.Fl)(()=>{var e;return(null==(e=U.find(e=>e.value===S.add_type))?void 0:e.label)||""}),k=e=>{let t=new FileReader;t.onload=e=>{var t;S.html_content=null==(t=e.target)?void 0:t.result},e.file&&t.readAsText(e.file)},Z=()=>{let e=C.getState();e.preview&&e.preview(S.html_content)},[x,C]=(0,_.d)({onChangeState:e=>{if(e){let e=C.getState(),{row:t}=e;g.value=e.isEdit,e.type&&(S.add_type=e.type),t&&(w.value=t.id,S.temp_name=t.temp_name,S.add_type=t.add_type,S.html_content=t.html_content,S.drag_data=t.drag_data)}else w.value=0,S.temp_name="",S.add_type=0,S.html_content="",S.drag_data=""},onConfirm:async()=>{g.value?await (0,v.QB)({id:w.value,...(0,s.IU)(S)}):await (0,v.WF)((0,s.IU)(S)),C.getState().refresh()}});return(e,a)=>{let _=r.Z,v=p.ZP,w=m.Z,C=i.Z,W=o.Z,j=u.ZP,H=d.Z,P=n.ZP,F=l.Z;return(0,s.wg)(),(0,s.j4)((0,s.SU)(x),{title:(0,s.SU)(y),width:1200},{default:(0,s.w5)(()=>[(0,s.Wm)(F,{class:"pt-8px",model:(0,s.SU)(S)},{default:(0,s.w5)(()=>[(0,s.Wm)(C,{cols:24,"x-gap":24},{default:(0,s.w5)(()=>[(0,s.Wm)(v,{span:18,label:"Name",path:"temp_name"},{default:(0,s.w5)(()=>[(0,s.Wm)(_,{value:(0,s.SU)(S).temp_name,"onUpdate:value":a[0]||(a[0]=e=>(0,s.SU)(S).temp_name=e),placeholder:e.$t("market.template.add.namePlaceholder")},null,8,["value","placeholder"])]),_:1}),(0,s.Wm)(v,{span:6,label:"Type",path:"add_type"},{default:(0,s.w5)(()=>[(0,s.Wm)(w,{value:(0,s.SU)(S).add_type,"onUpdate:value":a[1]||(a[1]=e=>(0,s.SU)(S).add_type=e),disabled:(0,s.SU)(g),options:U},null,8,["value","disabled"])]),_:1})]),_:1}),(0,s.Wm)(P,{label:(0,s.SU)(b),"show-feedback":!1},{default:(0,s.w5)(()=>[(0,s._)("div",c,[(0,s._)("div",f,[(0,s._)("div",null,[(0,s.Wm)(W,{mode:"button","button-type":"primary","is-upload":!1,accept:["html"],onChange:k},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.$t("market.template.uploadHtml")),1)]),_:1})]),(0,s.Wm)(j,{type:"primary",ghost:"",onClick:Z},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.$t("common.actions.preview")),1)]),_:1})]),(0,s._)("div",h,[1===(0,s.SU)(S).add_type?((0,s.wg)(),(0,s.j4)((0,s.SU)(t),{key:0,config:(0,s.SU)(S).drag_data,"onUpdate:config":a[2]||(a[2]=e=>(0,s.SU)(S).drag_data=e),html:(0,s.SU)(S).html_content,"onUpdate:html":a[3]||(a[3]=e=>(0,s.SU)(S).html_content=e)},null,8,["config","html"])):(0,s.kq)("",!0),0===(0,s.SU)(S).add_type?((0,s.wg)(),(0,s.j4)(H,{key:1,value:(0,s.SU)(S).html_content,"onUpdate:value":a[4]||(a[4]=e=>(0,s.SU)(S).html_content=e),language:"html"},null,8,["value"])):(0,s.kq)("",!0)])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title"])}}})}}]);